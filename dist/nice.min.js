"use strict";angular.module("niceElements",["ngMessages","ui.bootstrap","ui.bootstrap.datetimepicker","daterangepicker"]),angular.module("niceElements").directive("niceButtonToggle",function(){return{templateUrl:"views/nice-button-toggle.html",restrict:"E",scope:{model:"=?",label:"@"},link:function(scope,element,attrs){angular.isDefined(scope.model)&&(scope.model=!1)}}}),angular.module("niceElements").directive("niceButton",function($q){return{templateUrl:"views/nice-button.html",restrict:"E",transclude:!0,scope:{niceDisabled:"=",title:"@",noMargin:"=",fieldWidth:"@",labelWidth:"@",niceClick:"&",addClass:"@"},link:function(scope,element,attrs){scope.loading=!1,scope.click=function(){scope.loading===!1&&scope.niceDisabled!==!0&&(scope.loading=!0,$q.when(scope.niceClick())["finally"](function(){scope.loading=!1}))}}}}),angular.module("niceElements").directive("niceCalendar",function(){return{restrict:"E",templateUrl:"views/nice-calendar.html",scope:{title:"@",fieldWidth:"@",labelWidth:"@",minDate:"=",time:"@",noMargin:"@",color:"@",endDate:"=",startDate:"="},link:function(scope){function bootstrap(){scope.startDateHour=moment(scope.startDate).hours(),scope.startDateMinute=moment(scope.startDate).minutes(),scope.endDateHour=moment(scope.endDate).hours(),scope.endDateMinute=moment(scope.endDate).minutes()}function _removeTime(date){return moment(date).hour(0).minute(0).second(0).millisecond(0)}function _removeTimeWithDate(date){return date.day(0).hour(0).minute(0).second(0).millisecond(0)}function _buildMonth(scope,start,month){scope.weeks=[];var done=!1,date=start.clone().startOf("week").isoWeekday(1),monthIndex=date.month(),count=0;for(date.add(1,"w");!done;)scope.weeks.push({days:_buildWeek(date.clone(),month)}),date.add(1,"w"),done=count++>2&&monthIndex!==date.month(),monthIndex=date.month()}function _buildWeek(date,month){for(var days=[],i=0;7>i;i++){var day={name:date.format("dd"),number:date.date(),isCurrentMonth:date.month()===month.month(),isToday:date.isSame(new Date,"day"),isWeekday:0==date.weekday()||6==date.weekday(),date:date};scope.minDate?day.isDisabled=date.isBefore(moment(scope.minDate)):day.isDisabled=!1,days.push(day),date=date.clone(),date.add(1,"d")}return days}scope.selectStart=!0,scope.hours=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],scope.minutes=[0,5,10,15,20,25,30,35,40,45,50,55],scope.startDate||(scope.startDate=moment().minutes(0).second(0).millisecond(0)),scope.endDate||(scope.endDate=moment().minutes(0).second(0).millisecond(0)),scope.$watch("startDate",function(value,valueOld){bootstrap()}),scope.$watch("endDate",function(value,valueOld){bootstrap()}),scope.month=angular.copy(moment(scope.startDate));var start=angular.copy(moment(scope.startDate));_removeTimeWithDate(start.date(0)),_buildMonth(scope,start,scope.month),bootstrap(),scope.select=function(day){day.isDisabled||(scope.selectStart?(scope.startDate=day.date,scope.selectStart=!1,scope.startDate.isAfter(scope.endDate)&&(scope.endDate=angular.copy(scope.startDate))):(scope.endDate=day.date,scope.selectStart=!0,scope.endDate.isBefore(scope.startDate)&&(scope.startDate=angular.copy(scope.endDate))))},scope.startHourChange=function(value){scope.startDateHour=value,scope.startDate=moment(scope.startDate).hours(scope.startDateHour)},scope.startMinuteChange=function(value){scope.startDateMinute=value,scope.startDate=moment(scope.startDate).minutes(scope.startDateMinute)},scope.endHourChange=function(value){scope.endDateHour=value,scope.endDate=moment(scope.endDate).hours(scope.endDateHour)},scope.endMinuteChange=function(value){scope.endDateMinute=value,scope.endDate=moment(scope.endDate).minutes(scope.endDateMinute)},scope.next=function(){var next=angular.copy(scope.month);_removeTimeWithDate(next.month(next.month()+1).date(0)),scope.month.month(scope.month.month()+1),_buildMonth(scope,next,scope.month)},scope.previous=function(){var previous=angular.copy(scope.month);_removeTimeWithDate(previous.month(previous.month()-1).date(0)),scope.month.month(scope.month.month()-1),_buildMonth(scope,previous,scope.month)},scope.isSameDay=function(date1,date2){var d1=_removeTime(angular.copy(date1)),d2=_removeTime(angular.copy(date2));return d1.isSame(d2)},scope.isBetweenRange=function(date){return date.isBefore(moment(scope.endDate))&&date.isAfter(moment(scope.startDate))},scope.formatDate=function(date){return scope.time?moment(date).format("D.M.YYYY - HH:mm"):moment(date).format("D.M.YYYY")},scope.lighten=function(col){var amt=20,usePound=!1;"#"==col[0]&&(col=col.slice(1),usePound=!0);var num=parseInt(col,16),r=(num>>16)+amt;r>255?r=255:0>r&&(r=0);var b=(num>>8&255)+amt;b>255?b=255:0>b&&(b=0);var g=(255&num)+amt;return g>255?g=255:0>g&&(g=0),(usePound?"#":"")+(g|b<<8|r<<16).toString(16)}}}}),angular.module("niceElements").directive("niceChoice",function(){return{templateUrl:"views/nice-choice.html",restrict:"E",scope:{title:"@",model:"=",list:"=",isDisabled:"=",fieldWidth:"@",labelWidth:"@",listIsObj:"@",selectedIsObj:"@",objValue:"@",objKey:"@",noMargin:"@",multiple:"@"},link:function(scope,element,attr){if(attr.title||(attr.title=""),attr.fieldWidth||(attr.fieldWidth="col-sm-8"),attr.labelWidth||(attr.labelWidth="col-sm-4"),attr.listIsObj=angular.isDefined(attr.listIsObj),attr.selectedIsObj=angular.isDefined(attr.selectedIsObj),attr.objValue||(attr.objValue="value"),attr.objKey||(attr.objKey="id"),attr.multiple=angular.isDefined(attr.multiple),scope.firstTime=!0,scope.checkIfFirstTime=function(){return scope.firstTime?(scope.firstTime=!1,!0):!1},angular.isDefined(scope.model)||scope.multiple&&(scope.model=[]),scope.listIsObj?scope.internalList=scope.list:scope.internalList=_.map(scope.list,function(val){var obj={};return obj[scope.objKey]=val,obj[scope.objValue]=val,obj}),scope.selectedIsObj)scope.internalSelected=scope.model;else if(scope.multiple)scope.internalSelected=_.map(scope.model,function(val){var obj={};return obj[scope.objKey]=val,obj[scope.objValue]=val,obj});else if(scope.model){var obj={};obj[scope.objKey]=scope.model,obj[scope.objValue]=scope.model,scope.internalSelected=obj}else scope.internalSelected=scope.internalList[0]},controller:function($rootScope,$scope){var getFilter=function(item){var filter={};return item.hasOwnProperty($scope.objKey)?filter[$scope.objKey]=item[$scope.objKey]:filter[$scope.objKey]=item,filter};$scope.setDefault=function(){$scope.multiple||($scope.internalSelected=$scope.internalList[0])},$scope.isItemSelected=function(item){return $scope.internalSelected?$scope.multiple?_.where($scope.internalSelected,getFilter(item)).length>0:$scope.internalSelected[$scope.objKey]==item[$scope.objKey]:!1},$scope.toggle=function(item){$scope.isDisabled||($scope.formChoice.$setDirty(),$scope.multiple?$scope.isItemSelected(item)?$scope.internalSelected=_.without($scope.internalSelected,_.findWhere($scope.internalSelected,getFilter(item))):$scope.internalSelected.push(item):$scope.internalSelected=item)},$scope.getLabel=function(item){return item[$scope.objValue]},$scope.$watchCollection("list",function(value_new,value_old){$scope.listIsObj?$scope.internalList=$scope.list:$scope.internalList=_.map($scope.list,function(val){var obj={};return obj[$scope.objKey]=val,obj[$scope.objValue]=val,obj})}),$scope.$watchCollection("internalSelected",function(value_new,value_old){(!angular.equals(value_new,value_old)||$scope.checkIfFirstTime())&&($scope.selectedIsObj?$scope.model=value_new:$scope.multiple?$scope.model=_.map(value_new,$scope.objKey):$scope.model=value_new[$scope.objKey])}),$scope.$watchCollection("model",function(value_new,value_old){angular.equals(value_new,value_old)||(value_new?$scope.selectedIsObj?$scope.internalSelected=value_new:$scope.multiple?$scope.internalSelected=_.map(value_new,function(item){return _.find($scope.internalList,getFilter(item))}):$scope.internalSelected=_.find($scope.internalList,getFilter(value_new)):$scope.multiple?$scope.internalSelected=[]:$scope.internalSelected=$scope.internalList[0]),value_new||$scope.multiple||($scope.internalSelected=$scope.internalList[0])})}}}),angular.module("niceElements").directive("niceComment",function($timeout){return{templateUrl:"views/nice-comment.html",restrict:"E",scope:{model:"=",placeholder:"@",noTextLabel:"@",noMarginBottom:"@",fieldWidth:"@",labelWidth:"@",help:"@",rows:"@"},link:function(scope,element,attrs){null==scope.model&&(scope.model=""),attrs.placeholder||(attrs.placeholder=""),attrs.noTextLabel||angular.isDefined(attrs.noTextLabel),attrs.noMarginBottom||angular.isDefined(attrs.noMarginBottom),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.help||(attrs.help=""),attrs.rows||(attrs.rows=3);var textareas=element.find("textarea");scope.edit=function(){scope.editing=!0,$timeout(function(){textareas[0].focus()})}},controller:function($scope){$scope.editing=!1,$scope.save=function(){$scope.editing=!1}}}}),angular.module("niceElements").directive("niceDateRange",function(){return{restrict:"E",transclude:!0,templateUrl:"views/nice-date-range.html",scope:{model:"=",title:"@",fieldWidth:"@",format:"@",min:"@",max:"@",noMargin:"@",labelWidth:"@",startOfTheYear:"@"},link:function(scope,iElement,attrs,ctrl){attrs.title||(attrs.title=""),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.format||(attrs.format="dd.MM.yyyy"),attrs.noMargin=angular.isDefined(attrs.noMargin),angular.isDefined(scope.model)||(angular.isDefined(scope.startOfTheYear)?scope.model={startDate:moment([moment().year()]).format(),endDate:moment().format()}:scope.model={startDate:moment().format(),endDate:moment().format()})},controller:function($scope,$filter){$scope.opts={locale:{applyClass:"btn-green",firstDay:1},ranges:{},min:$scope.min,max:$scope.max},$scope.opts.ranges.Today=[moment(),moment()],$scope.opts.ranges["Last 7 days"]=[moment().subtract(7,"days"),moment()],$scope.opts.ranges["Last 30 days"]=[moment().subtract(30,"days"),moment()],$scope.opts.ranges["This month"]=[moment().startOf("month"),moment().endOf("month")],angular.isDefined($scope.format)&&($scope.opts.format=format)}}}),angular.module("niceElements").directive("niceDate",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"views/nice-date.html",scope:{model:"=",title:"@",fieldWidth:"@",labelWidth:"@",format:"@",min:"@",max:"@",noMargin:"@",startDate:"=",endDate:"="},link:function(scope,iElement,attrs,ctrl){attrs.title||(attrs.title=""),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.format||(attrs.format="dd.MM.yyyy"),attrs.noMargin=angular.isDefined(attrs.noMargin),scope.model&&(scope.model=new Date),scope.dateOptions={formatYear:"yy",startingDay:1}},controller:function($scope){angular.isDefined($scope.model)||($scope.model=moment().format()),$scope.today=function(){$scope.model=new Date},$scope.open=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.opened=!0}}}}),angular.module("niceElements").directive("niceDatetimePicker",function($window,$compile){return{scope:{model:"=",format:"@",modelFormat:"@",date:"@",time:"@",width:"@",enableOkButtons:"@",lang:"@",minDate:"@",maxDate:"@",weekStart:"@",okText:"@",cancelText:"@",shortTime:"@",title:"@",noMargin:"@",fieldWidth:"@",labelWidth:"@"},templateUrl:"views/nice-datetime-picker.html",link:{pre:function($scope,$element,$attrs){var params={title:"",noMargin:!1,fieldWidth:"col-sm-8",labelWidth:"col-sm-4",format:"DD.MM.YYYY HH:mm",modelFormat:"YYYY-MM-DDTHH:mm:ss.SSS",minDate:null,maxDate:null,lang:"en",weekStart:1,shortTime:!1,cancelText:"Cancel",okText:"OK",date:!0,time:!1,width:300,enableOkButtons:!1},initCurrentDate=function(modelValue){$scope.modelUpdatedInternally=!0;var tmpCurrentDate=null;if("undefined"==typeof modelValue||null===modelValue)tmpCurrentDate=moment();else if(!params.date&&params.time){var _time=moment(),i_hour=params.modelFormat.indexOf("HH:mm"),i_min=params.modelFormat.indexOf("mm"),hours=modelValue.substring(i_hour,i_hour+2),minutes=modelValue.substring(i_min,i_min+2);i_hour>-1&&i_min>-1?(_time.hours(hours),_time.minutes(minutes)):console.error("Cannot parse current time model with passed modelFilter. Please check if you missed modelFilter setting in directive.. Falling back to current time instead."),tmpCurrentDate=_time}else tmpCurrentDate="string"==typeof modelValue?params.modelFormat.indexOf("Z")>=0?moment(modelValue,params.modelFormat).locale(params.lang):moment.utc(modelValue,params.modelFormat).local().locale(params.lang):params.modelFormat.indexOf("Z")>=0?moment(modelValue).locale(params.lang):moment.utc(modelValue).local().locale(params.lang);$scope.currentDate!=tmpCurrentDate&&($scope.currentDate=tmpCurrentDate)};params.date="true"===$scope.date||$scope.date===!0,params.time="true"===$scope.time||$scope.time===!0,$scope.format&&""!=$scope.format&&(params.format=$scope.format),$scope.enableOkButtons&&(params.enableOkButtons="true"===$scope.enableOkButtons),$scope.lang&&(params.lang=$scope.lang),$scope.minDate&&(params.minDate=$scope.minDate),$scope.maxDate&&(params.maxDate=$scope.maxDate),$scope.weekStart&&(params.weekStart=parseInt($scope.weekStart)),$scope.okText&&(params.okText=$scope.okText),$scope.cancelText&&(params.cancelText=$scope.cancelText),$scope.noMargin&&(params.noMargin="true"===$scope.noMargin),$scope.modelFormat&&(params.modelFormat=$scope.modelFormat),$scope.date=params.date,$scope.time=params.time,$scope=angular.extend($scope,params),$scope.modelUpdatedInternally=!1,initCurrentDate($scope.model),$scope.opened=!1,$scope.openDtp=function(){$scope.$broadcast("dtp-open-click"),$scope.opened=!0},$scope.closeDtp=function(response){$scope.$broadcast("dtp-close-click"),$scope.opened=!1},$scope.$on("dateSelected",function(){$scope.formDatetimePicker.$setDirty()}),$scope.$watch("currentDate",function(newDate){if($scope.value=moment(newDate).locale(params.lang).format(params.format),!params.date&&params.time||params.date&&!params.time)var _date=moment(newDate,params.modelFormat).locale(params.lang).format(params.modelFormat);else var _date=moment(newDate,params.modelFormat).utc().locale(params.lang).format(params.modelFormat);$scope.model=_date}),$scope.$watch("model",function(newModel,oldModel){newModel&&newModel!=oldModel&&$scope.modelUpdatedInternally===!1&&initCurrentDate(newModel),$scope.modelUpdatedInternally&&($scope.modelUpdatedInternally=!1)})}}}}),angular.module("niceElements").directive("niceDatetimerangePicker",["$window","$timeout",function($window,$timeout){return{scope:{modelStart:"=",modelEnd:"=",format:"@",modelFormat:"@",date:"@",time:"@",width:"@",enableOkButtons:"@",lang:"@",minDate:"@",maxDate:"@",weekStart:"@",okText:"@",cancelText:"@",shortTime:"@",title:"@",noMargin:"@",fieldWidth:"@",labelWidth:"@"},templateUrl:"views/nice-datetimerange-picker.html",link:{pre:function($scope,$element,$attrs){var params={title:"",noMargin:!1,fieldWidth:"col-sm-8",labelWidth:"col-sm-4",format:"DD.MM.YYYY HH:mm",modelFormat:"YYYY-MM-DDTHH:mm:ss.SSS",minDate:null,maxDate:null,lang:"en",weekStart:1,shortTime:!1,cancelText:"Cancel",okText:"OK",date:!0,time:!1,width:300,enableOkButtons:!1},setLabelValue=function(){var _from=moment($scope.internalStart).locale(params.lang).format(params.format),_to=moment($scope.internalEnd).locale(params.lang).format(params.format);$scope.value=_from+" - "+_to},initCurrentDates=function(){if("undefined"==typeof $scope.modelStart||null===$scope.modelStart){var _start=moment().subtract(1,"days").utc().locale(params.lang).format(params.modelFormat);$scope.modelStart=_start}else if(!params.date&&params.time){var _time=moment(),i_hour=params.modelFormat.indexOf("HH:mm"),i_min=params.modelFormat.indexOf("mm"),hours=$scope.model.substring(i_hour,i_hour+2),minutes=$scope.model.substring(i_min,i_min+2);i_hour>-1&&i_min>-1?(_time.hours(hours),_time.minutes(minutes)):console.error("Cannot parse current time model with passed modelFilter. Please check if you missed modelFilter setting in directive.. Falling back to current time instead."),$scope.dateStart=_time}else"string"==typeof $scope.modelStart?params.modelFormat.indexOf("Z")>=0?$scope.dateStart=moment($scope.modelStart,params.modelFormat).locale(params.lang):$scope.dateStart=moment.utc($scope.modelStart,params.modelFormat).local().locale(params.lang):params.modelFormat.indexOf("Z")>=0?$scope.dateStart=moment($scope.modelStart).locale(params.lang):$scope.dateStart=moment.utc($scope.modelStart).local().locale(params.lang);if("undefined"==typeof $scope.modelEnd||null===$scope.modelEnd){var _end=moment().utc().locale(params.lang).format(params.modelFormat);$scope.modelEnd=_end}else if(!params.date&&params.time){var _time=moment(),i_hour=params.modelFormat.indexOf("HH:mm"),i_min=params.modelFormat.indexOf("mm"),hours=$scope.model.substring(i_hour,i_hour+2),minutes=$scope.model.substring(i_min,i_min+2);i_hour>-1&&i_min>-1?(_time.hours(hours),_time.minutes(minutes)):console.error("Cannot parse current time model with passed modelFilter. Please check if you missed modelFilter setting in directive.. Falling back to current time instead."),$scope.dateEnd=_time}else"string"==typeof $scope.modelEnd?params.modelFormat.indexOf("Z")>=0?$scope.dateEnd=moment($scope.modelEnd,params.modelFormat).locale(params.lang):$scope.dateEnd=moment.utc($scope.modelEnd,params.modelFormat).local().locale(params.lang):params.modelFormat.indexOf("Z")>=0?$scope.dateEnd=moment($scope.modelEnd).locale(params.lang):$scope.dateEnd=moment.utc($scope.modelEnd).local().locale(params.lang);$scope.dateStart>$scope.dateEnd&&($scope.dateEnd=moment($scope.dateStart))};params.date="true"===$scope.date,params.time="true"===$scope.time,$scope.format&&""!=$scope.format&&(params.format=$scope.format),$scope.enableOkButtons&&(params.enableOkButtons="true"===$scope.enableOkButtons),$scope.lang&&(params.lang=$scope.lang),$scope.minDate&&(params.minDate=$scope.minDate),$scope.maxDate&&(params.maxDate=$scope.maxDate),$scope.weekStart&&(params.weekStart=parseInt($scope.weekStart)),$scope.okText&&(params.okText=$scope.okText),$scope.cancelText&&(params.cancelText=$scope.cancelText),$scope.noMargin&&(params.noMargin="true"===$scope.noMargin),$scope.modelFormat&&(params.modelFormat=$scope.modelFormat),$scope.date=params.date,$scope.time=params.time,$scope=angular.extend($scope,params),$scope.openDtpRange=function(){initCurrentDates(),$scope.showDtpRange=!0},$scope.okClick=function(){setLabelValue();var _start=moment($scope.internalStart,params.modelFormat).utc().locale(params.lang).format(params.modelFormat);$scope.modelStart=_start;var _end=moment($scope.internalEnd,params.modelFormat).utc().locale(params.lang).format(params.modelFormat);$scope.modelEnd=_end,$scope.showDtpRange=!1},$scope.cancelClick=function(){if($scope.showDtpRange=!1,params.modelFormat.indexOf("Z")>=0)var _start=moment($scope.modelStart,params.modelFormat).locale(params.lang).format(params.modelFormat),_end=moment($scope.modelEnd,params.modelFormat).locale(params.lang).format(params.modelFormat);else var _start=moment.utc($scope.modelStart,params.modelFormat).local().locale(params.lang).format(params.modelFormat),_end=moment.utc($scope.modelEnd,params.modelFormat).local().locale(params.lang).format(params.modelFormat);$scope.internalStart=_start,$scope.internalEnd=_end,setLabelValue()},$scope.selectLastNDays=function(days){$scope.dateStart=moment().subtract(days,"days"),$scope.dateEnd=moment(),$scope.internalStart=$scope.dateStart,$scope.internalEnd=$scope.dateEnd,setLabelValue()},$scope.selectLastMonth=function(){$scope.dateStart=moment().subtract(1,"months"),$scope.dateEnd=moment(),$scope.internalStart=$scope.dateStart,$scope.internalEnd=$scope.dateEnd,setLabelValue()},$scope.selectThisMonth=function(){$scope.dateStart=moment().date(1).hours(0).minutes(0).seconds(0).milliseconds(0),$scope.dateEnd=moment().endOf("month"),$scope.internalStart=$scope.dateStart,$scope.internalEnd=$scope.dateEnd,setLabelValue()},$scope.$watchGroup(["dateStart","dateEnd"],function(newValues){$scope.internalStart=moment(newValues[0]).locale(params.lang).format(params.modelFormat),$scope.internalEnd=moment(newValues[1]).locale(params.lang).format(params.modelFormat),setLabelValue()}),$scope.$watchGroup(["modelStart","modelEnd"],function(){initCurrentDates()})}}}}]),angular.module("niceElements").directive("niceDropdown",function(){return{templateUrl:"views/nice-dropdown.html",restrict:"E",transclude:!0,scope:{title:"@",model:"=",list:"=",isDisabled:"=",fieldWidth:"@",labelWidth:"@",addButtonEnable:"=",addButtonFunction:"&",objValue:"@",objKey:"@?",selectedIsObj:"@",nullable:"@",required:"@",showTax:"@",noMargin:"@",multiple:"@",help:"@",listenKeydown:"@"},compile:function(element,attrs){attrs.title||(attrs.title=""),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.objValue||(attrs.objValue="value"),attrs.objKey||(attrs.objKey="id"),attrs.help||(attrs.help=""),attrs.valid=attrs.formDropdown,attrs.addButtonFunction||(attrs.addButtonFunction=null)},controller:function($rootScope,$scope,$document){$scope.selectedIsObj="true"===$scope.selectedIsObj||$scope.selectedIsObj===!0,$scope.nullable="true"===$scope.nullable||$scope.nullable===!0,$scope.required="true"===$scope.required||$scope.required===!0,$scope.showTax="true"===$scope.showTax||$scope.showTax===!0,$scope.noMargin="true"===$scope.noMargin||$scope.noMargin===!0,$scope.multiple="true"===$scope.multiple||$scope.multiple===!0,$scope.internalSelected=null,$scope.id=Math.random().toString(36).substring(7);var getFilter=function(item){var filter={};return item.hasOwnProperty($scope.objKey)?filter[$scope.objKey]=item[$scope.objKey]:filter[$scope.objKey]=item,filter};$scope.isItemSelected=function(item){return $scope.internalSelected?$scope.multiple?_.where($scope.internalSelected,{id:item.id}).length>0:$scope.internalSelected[$scope.objKey]==item[$scope.objKey]:!1};var _set_internal_list=function(){$scope.internalList=angular.copy($scope.list)},_add_null_object_to_internal=function(){if($scope.nullable&&!$scope.multiple){var nullObj={};nullObj[$scope.objKey]=null,nullObj[$scope.objValue]="-",$scope.internalList=[nullObj].concat($scope.internalList)}},_get_selected_object=function(selected){return selected?$scope.selectedIsObj?selected:_.find($scope.internalList,getFilter(selected)):null},_set_internal_selected_one=function(selected){var obj={},selectedObj=_get_selected_object(selected);obj=selectedObj&&_.find($scope.internalList,getFilter(selected))?selectedObj:$scope.internalList[0],$scope.internalSelected=obj,_set_model(obj)},_get_selected_objects=function(selected){return selected?$scope.selectedIsObj?selected:_.map(selected,function(val){return _.find($scope.internalList,getFilter(val))}):null},_set_internal_selected_multiple=function(item){var _selected_objects=_get_selected_objects(item);_selected_objects?($scope.internalSelected=_selected_objects,_set_model($scope.internalSelected)):($scope.internalSelected=[],_set_model($scope.internalSelected))},_set_model=function(value){var _new=angular.copy($scope.model);_new=$scope.multiple?$scope.selectedIsObj?value:_.map(value,function(val){return val[$scope.objKey]}):null==value[$scope.objKey]?null:$scope.selectedIsObj?value:value[$scope.objKey],_.isEqual(_new,$scope.model)||($scope.model=_new)},init=function(){if(_set_internal_list(),_add_null_object_to_internal(),$scope.multiple&&$scope.model&&($scope.internalSelected?_set_internal_selected_multiple(_.filter($scope.internalSelected,function(obj){return _.find($scope.internalList,getFilter(obj))})):$scope.internalSelected=[]),$scope.internalList&&$scope.internalList.length>0)$scope.emptyList=!1,$scope.multiple?_set_internal_selected_multiple($scope.model):_set_internal_selected_one($scope.model),$scope.formDropdown&&$scope.required&&$scope.formDropdown.$setValidity("required",!0);else{$scope.emptyList=!0;var sel={};sel[$scope.objKey]=null,sel[$scope.objValue]="No options",$scope.internalList=[sel],$scope.formDropdown&&$scope.required&&$scope.formDropdown.$setValidity("required",!1),$scope.multiple?_set_internal_selected_multiple(sel):_set_internal_selected_one([sel])}};$scope.clicked=function(item){if($scope.formDropdown.$setDirty(),$scope.multiple){var _current=angular.copy($scope.internalSelected);_.find(_current,getFilter(item))?_current=_.reject(_current,getFilter(item[$scope.objKey])):_current.push(item),_set_internal_selected_multiple(_current)}else _set_internal_selected_one(item)},$scope.getLabel=function(item){return item?item[$scope.objValue]:"-"},$scope.$watch("list",function(value_new,value_old){init()},!0),$scope.$watch("model",function(value_new,value_old){if($scope.multiple)var _new_model_object=_get_selected_object(value_new);else var _new_model_object=_get_selected_objects(value_new);_.isEqual(_new_model_object,$scope.internalSelected)||init()}),$scope.listenKeydown&&$document.bind("keypress",function(e){if($scope.status.isopen){var char=String.fromCharCode(e.which).toLowerCase(),index=_.findIndex($scope.internalList,function(item){var _name=item[$scope.objValue].toLowerCase();return 0===_name.indexOf(char)});if(index>=0){var _id_name="#"+$scope.id+"-"+index,_id_first="#"+$scope.id+"-0",_relative_top=Math.abs($(_id_first).offset().top-$(_id_name).offset().top);_relative_top>=0&&$("#"+$scope.id).animate({scrollTop:_relative_top},100)}}})}}}),angular.module("niceElements").directive("niceDtp",function($window,$parse,$document){return{scope:{model:"=",format:"@",modelFormat:"@",date:"@",time:"@",width:"@",enableOkButtons:"@",lang:"@",minDate:"@",maxDate:"@",weekStart:"@",okText:"@",cancelText:"@",shortTime:"@",title:"@",noMargin:"@",fieldWidth:"@",labelWidth:"@",closed:"="},templateUrl:"views/nice-dtp.html",link:function($scope,$element,$attrs){var params={title:"",noMargin:!1,fieldWidth:"col-sm-8",labelWidth:"col-sm-4",format:"DD.MM.YYYY HH:mm",modelFormat:"YYYY-MM-DDTHH:mm:ss.SSS",minDate:null,maxDate:null,lang:"en",weekStart:1,shortTime:!1,cancelText:"Cancel",okText:"OK",date:!0,time:!1,width:300,enableOkButtons:!1},prepareAttrs=function(){params.date="true"===$attrs.date||$attrs.date===!0,params.time="true"===$attrs.time||$attrs.time===!0,params.inline="true"===$attrs.inline||$attrs.inline===!0,$attrs.format&&""!=$attrs.format&&(params.format=$attrs.format),$scope.enableOkButtons&&""!=$attrs.enableOkButtons&&(params.enableOkButtons="true"===$attrs.enableOkButtons),$attrs.lang&&""!=$attrs.lang&&(params.lang=$attrs.lang),$attrs.minDate&&""!=$attrs.minDate&&(params.minDate=$attrs.minDate),$attrs.maxDate&&""!=$attrs.maxDate&&(params.maxDate=$attrs.maxDate),$scope.weekStart&&""!=$attrs.weekStart&&(params.weekStart=parseInt($attrs.weekStart)),$attrs.okText&&""!=$attrs.okText&&(params.okText=$attrs.okText),$attrs.cancelText&&""!=$attrs.cancelText&&(params.cancelText=$attrs.cancelText),$attrs.noMargin&&""!=$attrs.noMargin&&(params.noMargin="true"===$attrs.noMargin),$attrs.modelFormat&&""!=$attrs.modelFormat&&(params.modelFormat=$attrs.modelFormat),$attrs.width&&(params.width=parseInt($attrs.width)),$scope=angular.extend($scope,params)},that={init:function(){$scope.showDtp=!1,that.initDays(),that.initDates()},initDays:function(){$scope.days=[];for(var i=params.weekStart;$scope.days.length<7;i++)i>6&&(i=0),$scope.days.push(i.toString())},fixMinMaxDate:function(){""===$scope.minDate&&($scope.minDate=null),""===$scope.maxDate&&($scope.maxDate=null)},initDates:function(){that.fixMinMaxDate(),"undefined"==typeof $scope.model||null===$scope.model?$scope.currentDate=moment():$scope.currentDate=moment($scope.model).locale(params.lang),that.setDateModel(),that.setElementValue(),"undefined"!=typeof $scope.minDate&&null!==$scope.minDate&&"string"==typeof $scope.minDate&&($scope.minDate=moment($scope.minDate).locale(params.lang)),"undefined"!=typeof $scope.maxDate&&null!==$scope.maxDate&&"string"==typeof $scope.maxDate&&($scope.maxDate=moment($scope.maxDate).locale(params.lang)),params.date===!0&&(that.isAfterMinDate($scope.currentDate)||($scope.currentDate=moment($scope.minDate)),that.isBeforeMaxDate($scope.currentDate)||($scope.currentDate=moment($scope.maxDate)))},initDate:function(){that.fixMinMaxDate(),$scope.currentView=0,$scope.showCalendar=!0,$scope.showTime=!1;var _date="undefined"!=typeof $scope.currentDate&&null!==$scope.currentDate?$scope.currentDate:null;$scope.calendar=that.generateCalendar($scope.currentDate),"undefined"!=typeof $scope.calendar.week&&"undefined"!=typeof $scope.calendar.days&&(that.constructHTMLCalendar(_date,$scope.calendar),that.toggleButtons(_date)),that._centerBox(),that.showDate(_date)},initHours:function(){that.fixMinMaxDate(),$scope.currentView=1,$scope.hours=[],$scope.minutes=[];params.width,$($element).find(".dtp-picker-clock").css("marginLeft").replace("px",""),$($element).find(".dtp-picker-clock").css("marginRight").replace("px",""),$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),$($element).find(".dtp-picker").css("paddingRight").replace("px","");that.showTime($scope.currentDate),$scope.showTime=!0,$scope.showCalendar=!1;for(var pL=$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),pT=$($element).find(".dtp-picker").css("paddingTop").replace("px",""),mL=$($element).find(".dtp-picker-clock").css("marginLeft").replace("px",""),mT=$($element).find(".dtp-picker-clock").css("marginTop").replace("px",""),r=$($element).find(".dtp-picker-clock").innerWidth()/2,j=r/1.55,j_pm=r/1.15,_hours=[],h=0;12>h;++h){var cH=24==$scope.currentDate.format("HH")?0:$scope.currentDate.format("HH"),x=j*Math.sin(2*Math.PI*(h/12)),y=j*Math.cos(2*Math.PI*(h/12)),_hour={style:{x:x,y:y,marginLeft:r+x+parseInt(pL)/2-(parseInt(pL)+parseInt(mL))+"px",marginTop:r-y-parseInt(mT)/2-(parseInt(pT)+parseInt(mT))+"px"},h:0==h?12:h,selected:h==parseInt(cH)};_hours.push(_hour)}for(var h=0;12>h;++h){var cH=24==$scope.currentDate.format("HH")?0:$scope.currentDate.format("HH"),x=j_pm*Math.sin(2*Math.PI*(h/12)),y=j_pm*Math.cos(2*Math.PI*(h/12)),_hour={style:{x:x,y:y,marginLeft:r+x+parseInt(pL)/2-(parseInt(pL)+parseInt(mL))+"px",marginTop:r-y-parseInt(mT)/2-(parseInt(pT)+parseInt(mT))+"px"},h:0==h?0:h+12,selected:h+12==parseInt(cH)};_hours.push(_hour)}$scope.hours=_hours,that.toggleTime(!0),$($element).find(".dtp-picker-clock").css("height",$($element).find(".dtp-picker-clock").width()+(parseInt(pT)+parseInt(mT))+"px"),that.initHands(!0)},initMinutes:function(){that.fixMinMaxDate(),$scope.currentView=2,$scope.hours=[],$scope.minutes=[],that.showTime($scope.currentDate),$scope.showCalendar=!1,$scope.showTime=!0;for(var pL=$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),pT=$($element).find(".dtp-picker").css("paddingTop").replace("px",""),mL=$($element).find(".dtp-picker-clock").css("marginLeft").replace("px",""),mT=$($element).find(".dtp-picker-clock").css("marginTop").replace("px",""),r=$($element).find(".dtp-picker-clock").innerWidth()/2,j=r/1.2,_minutes=[],m=0;60>m;m+=5){var x=j*Math.sin(2*Math.PI*(m/60)),y=j*Math.cos(2*Math.PI*(m/60)),_minute={style:{x:x,y:y,marginLeft:r+x+parseInt(pL)/2-(parseInt(pL)+parseInt(mL))+"px",marginTop:r-y-parseInt(mT)/2-(parseInt(pT)+parseInt(mT))+"px"},m:2==m.toString().length?m:"0"+m,selected:m==5*Math.round($scope.currentDate.minute()/5)};_minutes.push(_minute)}$scope.minutes=_minutes,that.toggleTime(!1),$($element).find(".dtp-picker-clock").css("height",$($element).find(".dtp-picker-clock").width()+(parseInt(pT)+parseInt(mT))+"px"),that.initHands(!1),that._centerBox()},initHands:function(t){var pL=$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),mL=($($element).find(".dtp-picker").css("paddingTop").replace("px",""),$($element).find(".dtp-picker-clock").css("marginLeft").replace("px","")),w=($($element).find(".dtp-picker-clock").css("marginTop").replace("px",""),$($element).find(".dtp-clock-center").width()/2),h=$($element).find(".dtp-clock-center").height()/2,r=$($element).find(".dtp-picker-clock").innerWidth()/2,_hL=r/1.7,_mL=r/1.5;
$($element).find(".dtp-hour-hand").css({left:r+1.5*parseInt(mL)+"px",height:_hL+"px",marginTop:r-_hL-parseInt(pL)+"px"}).addClass(t===!0?"on":""),$($element).find(".dtp-minute-hand").css({left:r+1.5*parseInt(mL)+"px",height:_mL+"px",marginTop:r-_mL-parseInt(pL)+"px"}).addClass(t===!1?"on":""),$($element).find(".dtp-clock-center").css({left:r+parseInt(pL)+parseInt(mL)-w+"px",marginTop:r-parseInt(mL)/2-h+"px"}),that.animateHands(),that._centerBox()},animateHands:function(){var h=$scope.currentDate.hour(),m=$scope.currentDate.minute();that.rotateElement($($element).find(".dtp-hour-hand"),30*h),that.rotateElement($($element).find(".dtp-minute-hand"),30*Math.round(m/5))},isAfterMinDate:function(date,checkHour,checkMinute){var _return=!0;if("undefined"!=typeof $scope.minDate&&null!==$scope.minDate){var _minDate=moment($scope.minDate),_date=moment(date);checkHour||checkMinute||(_minDate.hour(0),_minDate.minute(0),_date.hour(0),_date.minute(0)),_minDate.second(0),_date.second(0),_minDate.millisecond(0),_date.millisecond(0),checkMinute?_return=parseInt(_date.format("X"))>=parseInt(_minDate.format("X")):(_date.minute(0),_minDate.minute(0),_return=parseInt(_date.format("X"))>=parseInt(_minDate.format("X")))}return _return},isBeforeMaxDate:function(date,checkTime,checkMinute){var _return=!0;if("undefined"!=typeof $scope.maxDate&&null!==$scope.maxDate){var _maxDate=moment($scope.maxDate),_date=moment(date);checkTime||checkMinute||(_maxDate.hour(0),_maxDate.minute(0),_date.hour(0),_date.minute(0)),_maxDate.second(0),_date.second(0),_maxDate.millisecond(0),_date.millisecond(0),checkMinute?_return=parseInt(_date.format("X"))<=parseInt(_maxDate.format("X")):(_date.minute(0),_maxDate.minute(0),_return=parseInt(_date.format("X"))<=parseInt(_maxDate.format("X")))}return _return},rotateElement:function(el,deg){$(el).css({WebkitTransform:"rotate("+deg+"deg)","-moz-transform":"rotate("+deg+"deg)"})},showDate:function(date){$scope.showTimeHeader=!0,date&&($scope.showDateHeader=!0,$scope.actualDay=date.locale(params.lang).format("dddd"),$scope.actualMonth=date.locale(params.lang).format("MMM").toUpperCase(),$scope.actualNum=date.locale(params.lang).format("DD"),$scope.actualYear=date.locale(params.lang).format("YYYY"))},showTime:function(date){if(date){var _minutes=5*Math.round(date.minute()/5),_time={hours:date.format("HH"),minutes:2==_minutes.toString().length?_minutes:"0"+_minutes};params.date?($scope.showTimeHeader=!0,$scope.actualTime=_time):(params.shortTime?$scope.actualDay=date.format("A"):$scope.actualDay=" ",$scope.showTimeHeader=!1,$scope.actualTime=_time)}},selectDate:function(date){date&&($scope.currentDate=date,that.showDate($scope.currentDate),$scope.$emit("dateSelected",{date:date}))},generateCalendar:function(date){var _calendar={};if(null!==date){var startOfMonth=moment(date).locale(params.lang).startOf("month"),endOfMonth=moment(date).locale(params.lang).endOf("month"),iNumDay=startOfMonth.format("d");_calendar.week=$scope.days,_calendar.days=[];for(var i=startOfMonth.date();i<=endOfMonth.date();i++){if(i===startOfMonth.date()){var iWeek=_calendar.week.indexOf(iNumDay.toString());if(iWeek>0)for(var x=0;iWeek>x;x++)_calendar.days.push(0)}_calendar.days.push(moment(startOfMonth).locale(params.lang).date(i))}}return _calendar},constructHTMLCalendar:function(date,calendar){$scope.monthAndYear=date.locale(params.lang).format("MMMM YYYY");for(var _weekDays=[],i=0;i<calendar.week.length;i++)_weekDays.push(moment(parseInt(calendar.week[i]),"d").locale(params.lang).format("dd").substring(0,1));$scope.weekDays=_weekDays;for(var _weeks=[],_week=[],i=0;i<calendar.days.length;i++){if(i%7==0){0!=i&&_weeks.push(_week);var _week=[]}var _day={label:null,selected:!1,disabled:!0,data:{}};0!=calendar.days[i]&&(_day.disabled=!1,_day.label=moment(calendar.days[i]).locale(params.lang).format("DD"),_day.data=calendar.days[i],that.isBeforeMaxDate(moment(calendar.days[i]),!1,!1)===!1||that.isAfterMinDate(moment(calendar.days[i]),!1,!1)===!1?_day.disabled=!0:moment(calendar.days[i]).locale(params.lang).format("DD")===moment($scope.currentDate).locale(params.lang).format("DD")&&(_day.selected=!0)),_week.push(_day)}_week.length>0&&_weeks.push(_week),$scope.weeks=_weeks},setName:function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},isPM:function(){return $scope.isPM},setElementValue:function(date){$scope.value=moment($scope.currentDate).locale(params.lang).format(params.format)},setDateModel:function(){$scope.model=angular.copy($scope.currentDate)},toggleButtons:function(date){if(date&&date.isValid()){var startOfMonth=moment(date).locale(params.lang).startOf("month"),endOfMonth=moment(date).locale(params.lang).endOf("month");$scope.btnMonthBeforeEnabled=that.isAfterMinDate(startOfMonth,!1,!1),$scope.btnMonthAfterEnabled=that.isBeforeMaxDate(endOfMonth,!1,!1);var startOfYear=moment(date).locale(params.lang).startOf("year"),endOfYear=moment(date).locale(params.lang).endOf("year");$scope.btnYearBeforeEnabled=that.isAfterMinDate(startOfYear,!1,!1),$scope.btnYearAfterEnabled=that.isBeforeMaxDate(endOfYear,!1,!1)}},toggleTime:function(isHours){isHours?angular.forEach($scope.hours,function(hour,hourKey){var _date=moment($scope.currentDate);_date.hour(that.convertHours(hour.h)).minute(0).second(0),that.isAfterMinDate(_date,!0,!1)===!1||that.isBeforeMaxDate(_date,!0,!1)===!1?hour.disabled=!0:hour.disabled=!1}):angular.forEach($scope.minutes,function(minute,minuteKey){var _minute=minute.m,_date=moment($scope.currentDate);_date.minute(_minute).second(0),that.isAfterMinDate(_date,!0,!0)===!1||that.isBeforeMaxDate(_date,!0,!0)===!1?minute.disabled=!0:minute.disabled=!1})},_onClick:function(){$scope.currentView=0,that.initDates(),that.show(),params.date?($scope.showDate=!0,that.initDate()):params.time&&($scope.showTime=!0,that.initHours())},_onBackgroundClick:function(e){e.stopPropagation(),that.hide()},_onElementClick:function(e){e.stopPropagation()},_onCloseClick:function(){that.hide(),$scope.closed&&$scope.closed(!0)},_onOKClick:function(){switch($scope.currentView){case 0:params.time===!0?that.initHours():(that.setElementValue(),that.setDateModel(),$scope.inline||that.hide());break;case 1:that.initMinutes();break;case 2:that.setElementValue(),that.setDateModel(),$scope.inline?that._onClick():that.hide()}},_onCancelClick:function(){if(params.time)switch($scope.currentView){case 0:that.hide();break;case 1:params.date?that.initDate():that.hide();break;case 2:that.initHours()}else that.hide()},_onMonthBeforeClick:function(){$scope.btnMonthBeforeEnabled&&($scope.currentDate.subtract(1,"months"),that.initDate($scope.currentDate))},_onMonthAfterClick:function(){$scope.btnMonthAfterEnabled&&($scope.currentDate.add(1,"months"),that.initDate($scope.currentDate))},_onYearBeforeClick:function(){$scope.btnYearBeforeEnabled&&($scope.currentDate.subtract(1,"years"),that.initDate($scope.currentDate))},_onYearAfterClick:function(){$scope.btnYearAfterEnabled&&($scope.currentDate.add(1,"years"),that.initDate($scope.currentDate))},_onSelectDate:function(date){angular.forEach($scope.weeks,function(week,weekKey){angular.forEach($scope.weeks[weekKey],function(day,dayKey){$scope.weeks[weekKey][dayKey].selected=!1})}),date.selected=!0,that.selectDate(date.data),params.enableOkButtons||that._onOKClick()},_onSelectHour:function(hourSelected){if(!hourSelected.disabled){angular.forEach($scope.hours,function(hour,hourKey){$scope.hours[hourKey].selected=!1}),hourSelected.selected=!0;var dataHour=parseInt(hourSelected.h);that.isPM()&&(dataHour+=12),$scope.currentDate.hour(dataHour),that.showTime($scope.currentDate),that.animateHands(),params.enableOkButtons||that._onOKClick()}},_onSelectMinute:function(minuteSelected){minuteSelected.disabled||(angular.forEach($scope.minutes,function(minute,minuteKey){$scope.minutes[minuteKey].selected=!1}),minuteSelected.selected=!0,$scope.currentDate.minute(parseInt(minuteSelected.m)),that.showTime($scope.currentDate),that.animateHands(),params.enableOkButtons||that._onOKClick())},convertHours:function(h){var _return=h;return 12>h&&that.isPM()&&(_return+=12),_return},setDate:function(date){params.currentDate=date,that.initDates()},setMinDate:function(date){params.minDate=date,that.initDates()},setMaxDate:function(date){params.maxDate=date,that.initDates()},show:function(){$scope.showDtp=!0,that._centerBox()},hide:function(){$scope.showDtp=!1},resetDate:function(){},_centerBox:function(){}};$scope.onClick=that._onClick,$scope.onOKClick=that._onOKClick,$scope.onCancelClick=that._onCancelClick,$scope.onCloseClick=that._onCloseClick,$scope.onSelectDate=that._onSelectDate,$scope.onMonthBeforeClick=that._onMonthBeforeClick,$scope.onMonthAfterClick=that._onMonthAfterClick,$scope.onYearBeforeClick=that._onYearBeforeClick,$scope.onYearAfterClick=that._onYearAfterClick,$scope.onSelectHour=that._onSelectHour,$scope.onSelectMinute=that._onSelectMinute,$scope.initDate=that.initDate,$scope.initHours=that.initHours,$scope.initMinutes=that.initMinutes,prepareAttrs(),that.init(),$scope.inline&&that._onClick(),$scope.$on("dtp-open-click",function(){that._onClick()}),$scope.$on("dtp-close-click",function(){that.hide()}),$scope.$watch("model",function(newDate){$scope.currentDate=newDate,that.showDate($scope.currentDate),that.initDate()})}}}),angular.module("niceElements").directive("niceInput",function(){return{templateUrl:"views/nice-input.html",restrict:"E",transclude:!0,scope:{model:"=",valid:"=",isDisabled:"=",type:"@",title:"@?",regex:"@?",placeholder:"@",minlength:"@?",maxlength:"@?",required:"@",fieldWidth:"@",labelWidth:"@",hideValid:"@",showValid:"@",textArea:"@",textAreaLines:"@",symbol:"@",help:"@",name:"@",noMargin:"@",minDecimalsCutZeros:"@"},link:function(scope,element,attrs){attrs.type||(attrs.type="text"),attrs.title||(attrs.title=""),attrs.regex||(attrs.regex=null),attrs.placeholder||(attrs.placeholder=""),attrs.minlength||(attrs.minlength=1),attrs.maxlength||(attrs.maxlength=100),attrs.required=angular.isDefined(attrs.required),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.hideValid=angular.isDefined(attrs.hideValid),attrs.showValid=angular.isDefined(attrs.showValid),attrs.textArea=angular.isDefined(attrs.textArea),attrs.textAreaLines||(attrs.textAreaLines=3),attrs.symbol||(attrs.symbol=""),attrs.help||(attrs.help=""),attrs.name||(attrs.name=""),attrs.noMargin=angular.isDefined(attrs.noMargin),attrs.minDecimalsCutZeros||(attrs.minDecimalsCutZeros=2),scope.internalType=attrs.type,"percent"==attrs.type?(scope.internalType="percent",attrs.symbol="%"):"number"==attrs.type?(scope.internalType="text",scope.model?scope.model=parseFloat(scope.model):scope.model=0):"integer"==attrs.type?(scope.internalType="text",scope.model=Number(scope.model)):"email"==attrs.type&&(scope.regexexp=new RegExp("^[_a-zA-Z0-9]+(.[_a-zA-Z0-9]+)*@[a-zA-Z0-9]+(.[a-zA-Z0-9]+)+(.[a-zA-Z]{2,4})")),angular.isDefined(attrs.valid)&&(scope.valid=scope.form),angular.isDefined(attrs.minDecimalsCutZeros)&&"number"==attrs.type&&(scope.model=parseFloat(scope.model),(scope.model.toString().split(".").length<2||scope.model.toString().split(".")[1].length<parseInt(attrs.minDecimalsCutZeros))&&(scope.model=parseFloat(scope.model).toFixed(parseInt(attrs.minDecimalsCutZeros)))),angular.isDefined(scope.regex)&&""!=scope.regex&&(scope.regexexp=new RegExp(scope.regex)),scope.$watch("model",function(value_new,value_old){scope.internalModel=scope.model}),scope.$watch("internalModel",function(value_new,value_old){"number"==attrs.type&&value_new&&"number"!=typeof value_new&&(scope.internalModel=value_new.replace(",","."),scope.model=scope.internalModel)})},controller:function($rootScope,$scope){$scope.id=Math.random().toString(36).substring(7),$scope.keypress=function(event){if("number"==$scope.type||"integer"==$scope.type)if(46==event.charCode||44==event.charCode){if("number"!=$scope.type)return event.preventDefault(),!1;if(String($scope.model).indexOf(".")>=0)return event.preventDefault(),!1}else{if(45!=event.charCode)return event.charCode>=48&&event.charCode<=58||0==event.charCode?!0:(event.preventDefault(),!1);if(String($scope.model).indexOf("-")>=0)return event.preventDefault(),!1}}}}}),angular.module("niceElements").directive("niceLabel",function(){return{templateUrl:"views/nice-label.html",restrict:"E",scope:{fieldWidth:"@",labelWidth:"@",value:"@",title:"@"},link:function(scope,element,attrs){attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.value||(attrs.labelWidth=""),attrs.title||(attrs.labelWidth="")}}}),angular.module("niceElements").directive("niceLoader",function(){return{templateUrl:"views/nice-loader.html",restrict:"E",scope:{visibleWhen:"=",addClass:"@"}}}),angular.module("niceElements").factory("NiceNotification",function($timeout,$http,$compile,$templateCache,$rootScope,$injector,$sce){var startTop=10,startRight=10,verticalSpacing=10,horizontalSpacing=10,delay=5e3,messageElements=[],notify=function(args,t){"object"!=typeof args&&(args={message:args}),args.template=args.template?args.template:"views/nice-notification.html",args.delay=angular.isUndefined(args.delay)?delay:args.delay,args.type=t?t:"",$http.get(args.template,{cache:$templateCache}).success(function(template){var scope=$rootScope.$new();if(scope.message=$sce.trustAsHtml(args.message),scope.title=$sce.trustAsHtml(args.title),scope.t=args.type.substr(0,1),scope.delay=args.delay,"object"==typeof args.scope)for(var key in args.scope)scope[key]=args.scope[key];var reposite=function(){for(var j=0,k=0,lastTop=startTop,i=messageElements.length-1;i>=0;i--){var element=messageElements[i],elHeight=parseInt(element[0].offsetHeight),elWidth=parseInt(element[0].offsetWidth);top+elHeight>window.innerHeight&&(lastTop=startTop,k++,j=0);var top=lastTop+(0===j?0:verticalSpacing),right=startRight+k*(horizontalSpacing+elWidth);element.css("top",top+"px"),element.css("right",right+"px"),lastTop=top+elHeight,j++}},templateElement=$compile(template)(scope);templateElement.addClass(args.type),templateElement.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd click",function(e){e=e.originalEvent||e,("click"===e.type||"opacity"===e.propertyName&&e.elapsedTime>=.4)&&(templateElement.remove(),messageElements.splice(messageElements.indexOf(templateElement),1),reposite())}),$timeout(function(){templateElement.addClass("killed"),templateElement.remove(),messageElements.splice(messageElements.indexOf(templateElement),1),reposite()},args.delay),angular.element(document.getElementsByTagName("body")).append(templateElement),messageElements.push(templateElement),$timeout(reposite)}).error(function(data){throw new Error("Template ("+args.template+") could not be loaded. "+data)})};return notify.config=function(args){startTop=args.top?args.top:startTop,verticalSpacing=args.verticalSpacing?args.verticalSpacing:verticalSpacing},notify.primary=function(){this(args,"")},notify.error=function(args){this(args,"error")},notify.success=function(args){this(args,"success")},notify.info=function(args){this(args,"info")},notify.warning=function(args){this(args,"warning")},notify}),angular.module("niceElements").directive("niceNumber",function(){return{templateUrl:"views/nice-number.html",restrict:"E",scope:{model:"=",valid:"=",disabled:"=",title:"@?",min:"@",max:"@",defaultValue:"@",required:"@",fieldWidth:"@",labelWidth:"@",showError:"@",noMargin:"@"},link:function(scope,element,attrs){attrs.title||(attrs.title=""),attrs.defaultValue?attrs.defaultValue=parseInt(attrs.defaultValue):attrs.defaultValue=0,attrs.required=angular.isDefined(attrs.required),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.showError=angular.isDefined(attrs.showError),attrs.noMargin=angular.isDefined(attrs.noMargin),angular.isDefined(attrs.valid)&&(scope.valid=scope.form),attrs.min||(attrs.min=0);var setDefault=function(){scope.model=attrs.defaultValue};angular.isDefined(attrs.model)&&parseFloat(scope.model)?scope.model=parseFloat(scope.model):setDefault(),scope.check()},controller:function($rootScope,$scope){$scope.canAdd=!0,$scope.canSubstract=!0,$scope.check=function(){$scope.min&&parseFloat($scope.model)<=$scope.min?$scope.canSubstract=!1:$scope.canSubstract=!0,$scope.max&&parseFloat($scope.model)>=$scope.max?$scope.canAdd=!1:$scope.canAdd=!0},$scope.add=function(){$scope.max?parseInt($scope.model)<$scope.max&&($scope.model=parseInt($scope.model)+1,$scope.form.$setDirty()):($scope.model=parseInt($scope.model)+1,$scope.form.$setDirty()),$scope.check()},$scope.subtract=function(){parseInt($scope.model)>$scope.min&&($scope.model=parseInt($scope.model)-1,$scope.form.$setDirty()),$scope.check()}}}}),angular.module("niceElements").directive("nicePercent",function(){return{templateUrl:"views/nice-percent.html",restrict:"E",transclude:!0,scope:{model:"=",valid:"=",isDisabled:"=",title:"@?",required:"@",fieldWidth:"@",labelWidth:"@",placeholder:"@",noMargin:"@"},link:function(scope,element,attrs){attrs.title||(attrs.title=""),attrs.required=angular.isDefined(attrs.required),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.placeholder||(attrs.placeholder=""),attrs.noMargin=angular.isDefined(attrs.noMargin)},controller:function($rootScope,$scope){angular.isDefined($scope.valid)&&($scope.valid=$scope.form);var roundN=function(number,decimals){return Number(new Decimal(String(number)).toFixed(decimals,4))};angular.isDefined($scope.model)?$scope.internalModel=roundN(100*angular.copy($scope.model),6):($scope.internalModel="0",$scope.model=0),$scope.change=function(){$scope.internalModel?($scope.internalModel=String($scope.internalModel).replace(",","."),parseFloat($scope.internalModel)>100&&($scope.internalModel=100),$scope.model=roundN(parseFloat($scope.internalModel)/100,6)):$scope.model=0},$scope.keypress=function(event){return 46!=event.charCode&&44!=event.charCode?event.charCode>=48&&event.charCode<=58||0==event.charCode?!0:(event.preventDefault(),!1):$scope.internalModel.indexOf(".")>=0?(event.preventDefault(),!1):void 0},$scope.$watch("model",function(value_new,value_old){value_new&&($scope.internalModel=roundN(100*angular.copy($scope.model),6))}),$scope.$watch("internalModel",function(value_new,value_old){$scope.internalModel||($scope.internalModel="0")})}}}),angular.module("niceElements").directive("niceSearch",function(){return{transclude:!0,templateUrl:"views/nice-search.html",restrict:"E",scope:{model:"=",isDisabled:"=",title:"@?",placeholder:"@",required:"@",fieldWidth:"@",labelWidth:"@",hideValid:"@",refreshFunction:"=",refreshSelectedCallback:"=",showDropdown:"@?",clearInput:"@",resetSearchInput:"@?",keyForInputLabel:"@?",disableRow:"@?",noMargin:"@",setText:"@"},link:function(scope,element,attrs,ctrl,transcludeFn){attrs.title||(attrs.title=""),attrs.placeholder||(attrs.placeholder=""),attrs.required=angular.isDefined(attrs.required),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.hideValid=angular.isDefined(attrs.hideValid),attrs.showDropdown=angular.isDefined(attrs.showDropdown),attrs.clearInput=angular.isDefined(attrs.clearInput),attrs.resetSearchInput=angular.isDefined(attrs.resetSearchInput),attrs.disableRow=angular.isDefined(attrs.disableRow),attrs.noMargin=angular.isDefined(attrs.noMargin),attrs.setText||(attrs.setText=""),transcludeFn(scope,function(clone,scope){var el=element.find(".nice-search");el.append(clone)}),scope.$watch("setText",function(){scope.modelString=scope.setText}),angular.isDefined(scope.model)&&(angular.isDefined(scope.keyForInputLabel)?scope.modelString=scope.model[scope.keyForInputLabel]:scope.modelString=scope.model);var setValid=function(isValid){scope.required&&scope.form.$setValidity("objectSelected",isValid)};scope.$watch("model",function(newValue){setValid(scope.model&&scope.model.id?!0:!1)}),scope.selectRow=function(obj){angular.isDefined(scope.refreshSelectedCallback)&&scope.refreshSelectedCallback(obj),scope.resetSearchInput?scope.model=null:scope.model=obj,angular.isDefined(scope.keyForInputLabel)?scope.modelString=obj[scope.keyForInputLabel]:scope.modelString=obj,scope.clear()},scope.clear=function(){scope.results=[],scope.clearInput&&(scope.modelString="")};var onClick=function(event){var isClickedElementChildOfPopup=element.find(event.target).length>0;isClickedElementChildOfPopup||(scope.results=[],scope.noResults=!1,scope.$apply())};angular.element(element).on("click",onClick);var onKeyDown=function(event){(38==event.keyCode||40==event.keyCode||13==event.keyCode||27==event.keyCode&&scope.showDropdown)&&(event.preventDefault(),27==event.keyCode&&(scope.modelString="",scope.clear()),13==event.keyCode&&scope.selectRow(scope.results[scope.selectedIndex]),40==event.keyCode&&scope.selectedIndex+1<scope.results.length&&(scope.selectedIndex+=1),38==event.keyCode&&scope.selectedIndex-1>=0&&(scope.selectedIndex-=1),scope.$apply())};angular.element(element).on("keydown",onKeyDown),scope.$on("$destroy",function(){angular.element(element).off("click",onClick),angular.element(element).off("keydown",onKeyDown)})},controller:function($scope,$timeout){$scope.id=Math.random().toString(36).substring(7),$scope.loading=!1,$scope.noResults=!1,$scope.requests=0,$scope.results=[];var updateList=function(results,requestNumber){results&&$scope.requests==requestNumber&&($scope.noResults=0==results.length,$scope.results=results,$scope.noResults||($scope.selectedIndex=0)),$scope.loading=!1};$scope.updateSearch=function(){$scope.loading=!0,$scope.timer_promise&&$timeout.cancel($scope.timer_promise),$scope.timer_promise=$timeout(function(){$scope.requests=$scope.requests+1;var requestNumber=angular.copy($scope.requests);$scope.refreshFunction($scope.modelString).then(function(response){updateList(response,requestNumber)}),$scope.model=$scope.modelString},200)},$scope.search=function(){$scope.isDisabled||($scope.showDropdown&&$scope.updateSearch(),$("#"+$scope.id).focus())}}}}),angular.module("niceElements").directive("niceTimePicker",function($window,$compile){return{scope:{model:"=",format:"@",modelFormat:"@",title:"@",noMargin:"@",fieldWidth:"@",labelWidth:"@"},restrict:"E",templateUrl:"views/nice-time-picker.html",link:function($scope,$element,$attrs){var params={format:"HH:mm",modelFormat:"HH:mm:ss"};angular.isDefined($scope.format)&&$scope.format&&(params.format=$scope.format),angular.isDefined($scope.modelFormat)&&$scope.modelFormat&&(params.modelFormat=$scope.modelFormat);var that={init:function(){$scope.showDtp=!1,that.initDates(),that.initHours()},initDates:function(){"undefined"==typeof $scope.model||null===$scope.model?$scope.currentDate=moment().seconds(0):$scope.currentDate=moment($scope.model,params.modelFormat),that.setDateModel(),that.setElementValue()},initHours:function(){$scope.currentView=1,$scope.hours=[],$scope.minutes=[],that.showTime($scope.currentDate),$scope.showTime=!0,$scope.showCalendar=!1;for(var pL=$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),pT=$($element).find(".dtp-picker").css("paddingTop").replace("px",""),mL=$($element).find(".dtp-picker-clock").css("marginLeft").replace("px",""),mT=$($element).find(".dtp-picker-clock").css("marginTop").replace("px",""),r=$($element).find(".dtp-picker-clock").innerWidth()/2,j=r/1.55,j_pm=r/1.15,_hours=[],h=0;12>h;++h){var cH=24==$scope.currentDate.format("HH")?0:$scope.currentDate.format("HH"),x=j*Math.sin(2*Math.PI*(h/12)),y=j*Math.cos(2*Math.PI*(h/12)),_hour={style:{x:x,y:y,marginLeft:r+x+parseInt(pL)/2-(parseInt(pL)+parseInt(mL))+"px",marginTop:r-y-parseInt(mT)/2-(parseInt(pT)+parseInt(mT))+"px"},h:0==h?12:h,selected:h==parseInt(cH)};_hours.push(_hour)}for(var h=0;12>h;++h){var cH=24==$scope.currentDate.format("HH")?0:$scope.currentDate.format("HH"),x=j_pm*Math.sin(2*Math.PI*(h/12)),y=j_pm*Math.cos(2*Math.PI*(h/12)),_hour={style:{x:x,y:y,marginLeft:r+x+parseInt(pL)/2-(parseInt(pL)+parseInt(mL))+"px",marginTop:r-y-parseInt(mT)/2-(parseInt(pT)+parseInt(mT))+"px"},h:0==h?0:h+12,selected:h+12==parseInt(cH)};_hours.push(_hour)}$scope.hours=_hours,that.toggleTime(!0),$($element).find(".dtp-picker-clock").css("height",$($element).find(".dtp-picker-clock").width()+(parseInt(pT)+parseInt(mT))+"px"),that.initHands(!0)},initMinutes:function(){$scope.currentView=2,$scope.hours=[],$scope.minutes=[],that.showTime($scope.currentDate),$scope.showCalendar=!1,$scope.showTime=!0;for(var pL=$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),pT=$($element).find(".dtp-picker").css("paddingTop").replace("px",""),mL=$($element).find(".dtp-picker-clock").css("marginLeft").replace("px",""),mT=$($element).find(".dtp-picker-clock").css("marginTop").replace("px",""),r=$($element).find(".dtp-picker-clock").innerWidth()/2,j=r/1.2,_minutes=[],m=0;60>m;m+=5){var x=j*Math.sin(2*Math.PI*(m/60)),y=j*Math.cos(2*Math.PI*(m/60)),_minute={style:{x:x,y:y,marginLeft:r+x+parseInt(pL)/2-(parseInt(pL)+parseInt(mL))+"px",marginTop:r-y-parseInt(mT)/2-(parseInt(pT)+parseInt(mT))+"px"},m:2==m.toString().length?m:"0"+m,selected:m==5*Math.round($scope.currentDate.minute()/5)};_minutes.push(_minute)}$scope.minutes=_minutes,that.toggleTime(!1),$($element).find(".dtp-picker-clock").css("height",$($element).find(".dtp-picker-clock").width()+(parseInt(pT)+parseInt(mT))+"px"),that.initHands(!1)},initHands:function(t){var pL=$($element).find(".dtp-picker").css("paddingLeft").replace("px",""),mL=($($element).find(".dtp-picker").css("paddingTop").replace("px",""),$($element).find(".dtp-picker-clock").css("marginLeft").replace("px","")),w=($($element).find(".dtp-picker-clock").css("marginTop").replace("px",""),$($element).find(".dtp-clock-center").width()/2),h=$($element).find(".dtp-clock-center").height()/2,r=$($element).find(".dtp-picker-clock").innerWidth()/2,_hL=r/1.7,_mL=r/1.5;$($element).find(".dtp-hour-hand").css({left:r+1.5*parseInt(mL)+"px",height:_hL+"px",marginTop:r-_hL-parseInt(pL)+"px"}).addClass(t===!0?"on":""),$($element).find(".dtp-minute-hand").css({left:r+1.5*parseInt(mL)+"px",height:_mL+"px",marginTop:r-_mL-parseInt(pL)+"px"}).addClass(t===!1?"on":""),$($element).find(".dtp-clock-center").css({left:r+parseInt(pL)+parseInt(mL)-w+"px",marginTop:r-parseInt(mL)/2-h+"px"}),that.animateHands()},animateHands:function(){var h=$scope.currentDate.hour(),m=$scope.currentDate.minute();that.rotateElement($($element).find(".dtp-hour-hand"),30*h),that.rotateElement($($element).find(".dtp-minute-hand"),30*Math.round(m/5))},rotateElement:function(el,deg){$(el).css({WebkitTransform:"rotate("+deg+"deg)","-moz-transform":"rotate("+deg+"deg)"})},showTime:function(date){if(date){var _minutes=5*Math.round(date.minute()/5),_time={hours:date.format("HH"),minutes:2==_minutes.toString().length?_minutes:"0"+_minutes};params.date?($scope.showTimeHeader=!0,$scope.actualTime=_time):(params.shortTime?$scope.actualDay=date.format("A"):$scope.actualDay=" ",$scope.showTimeHeader=!1,$scope.actualTime=_time)}},selectDate:function(date){date&&($scope.currentDate=date,that.showDate($scope.currentDate))},generateCalendar:function(date){var _calendar={};if(null!==date){var startOfMonth=moment(date).locale(params.lang).startOf("month"),endOfMonth=moment(date).locale(params.lang).endOf("month"),iNumDay=startOfMonth.format("d");_calendar.week=$scope.days,_calendar.days=[];for(var i=startOfMonth.date();i<=endOfMonth.date();i++){if(i===startOfMonth.date()){var iWeek=_calendar.week.indexOf(iNumDay.toString());if(iWeek>0)for(var x=0;iWeek>x;x++)_calendar.days.push(0)}_calendar.days.push(moment(startOfMonth).locale(params.lang).date(i))}}return _calendar},setElementValue:function(date){$scope.value=moment($scope.currentDate).format(params.format)},setDateModel:function(){$scope.model=moment($scope.currentDate).format(params.modelFormat)},toggleTime:function(isHours){isHours?angular.forEach($scope.hours,function(hour,hourKey){var _date=moment($scope.currentDate);_date.hour(hour.h).minute(0).second(0),hour.disabled=!1}):angular.forEach($scope.minutes,function(minute,minuteKey){var _minute=minute.m,_date=moment($scope.currentDate);_date.minute(_minute).second(0),minute.disabled=!1})},_onClick:function(){$scope.currentView=1,that.initDates(),that.show(),$scope.showTime=!0,that.initHours()},_onBackgroundClick:function(e){e.stopPropagation(),that.hide()},_onElementClick:function(e){e.stopPropagation()},_onCloseClick:function(){that.hide()},_onOKClick:function(){switch($scope.currentView){case 0:params.time===!0?that.initHours():(that.setElementValue(),that.setDateModel(),$scope.inline||that.hide());break;case 1:that.initMinutes();break;case 2:that.setElementValue(),that.setDateModel(),$scope.inline?that._onClick():that.hide()}},_onSelectHour:function(hourSelected){if(!hourSelected.disabled){angular.forEach($scope.hours,function(hour,hourKey){$scope.hours[hourKey].selected=!1}),hourSelected.selected=!0;var dataHour=parseInt(hourSelected.h);$scope.currentDate.hour(dataHour),that.showTime($scope.currentDate),that.animateHands(),that._onOKClick()}},_onSelectMinute:function(minuteSelected){minuteSelected.disabled||(angular.forEach($scope.minutes,function(minute,minuteKey){$scope.minutes[minuteKey].selected=!1}),minuteSelected.selected=!0,$scope.currentDate.minute(parseInt(minuteSelected.m)),that.showTime($scope.currentDate),that.animateHands(),that._onOKClick())},setDate:function(date){params.currentDate=date,that.initDates()},show:function(){$scope.showDtp=!0},hide:function(){$scope.showDtp=!1}};$scope.onClick=that._onClick,$scope.onCloseClick=that._onCloseClick,$scope.onSelectHour=that._onSelectHour,$scope.onSelectMinute=that._onSelectMinute,$scope.initHours=that.initHours,$scope.initMinutes=that.initMinutes,that.init(),$scope.$watch("model",function(newDate){$scope.currentDate=moment(newDate,params.modelFormat),that.setElementValue(),that.setDateModel()})}}}),angular.module("niceElements").directive("niceYesno",function($compile){var setButtonLabel=function(scope,state){state?scope.state=scope.yes:scope.state=scope.no};return{templateUrl:"views/nice-yesno.html",restrict:"E",scope:{model:"=",modelValue:"=",yes:"@",no:"@",title:"@",isDisabled:"=",fieldWidth:"@",labelWidth:"@",options:"=",defaultFalse:"@",noMargin:"@"},link:function(scope,element,attrs){attrs.yes||(attrs.yes="Yes"),attrs.no||(attrs.no="No"),attrs.title||(attrs.title=""),attrs.isDisabled=angular.isDefined(attrs.isDisabled),attrs.fieldWidth||(attrs.fieldWidth="col-sm-8"),attrs.labelWidth||(attrs.labelWidth="col-sm-4"),attrs.defaultFalse=angular.isDefined(attrs.defaultFalse),attrs.noMargin=angular.isDefined(attrs.noMargin),angular.isDefined(scope.model)||angular.isDefined(scope.options)||(scope.model=!angular.isDefined(scope.defaultFalse)),!angular.isDefined(scope.modelValue)&&angular.isDefined(scope.options)&&(scope.modelValue=scope.options[0]),setButtonLabel(scope,scope.model);var setButtonPosition=function(state){var el=element[0].querySelector(".yesno-button");state?($(el).removeClass("yesno-button-no"),$(el).addClass("yesno-button-yes")):($(el).addClass("yesno-button-no"),$(el).removeClass("yesno-button-yes"))};scope.setButtonPosition=setButtonPosition,setButtonPosition(scope.model),scope.$watch("model",function(value_new,value_old){angular.isDefined(scope.model)&&(setButtonLabel(scope,scope.model),scope.setButtonPosition(scope.model))}),scope.$watch("modelValue",function(value_new,value_old){scope.options&&(scope.model=scope.modelValue==scope.options[0])})},controller:function($rootScope,$scope){$scope["switch"]=function(){$scope.isDisabled||($scope.model=!$scope.model,$scope.options&&($scope.model?$scope.modelValue=$scope.options[0]:$scope.modelValue=$scope.options[1]),$scope.formYesno.$setDirty())}}}}),angular.module("niceElements").run(["$templateCache",function($templateCache){$templateCache.put("views/nice-button-toggle.html",'<div class="nice-button-toggle row">\n    <div class="col-xs-offset-4 col-xs-8">\n            <button type="button" class="btn btn-block btn-primary" ng-click="model = !model">\n                {{ label }}\n                <span ng-show="!model" class="glyphicon glyphicon-menu-down"></span>\n                <span ng-show="model" class="glyphicon glyphicon-menu-up"></span>\n            </button>\n    </div>\n</div>\n'),
$templateCache.put("views/nice-button.html",'<div class="nice-button" ng-class="{\'margin-bottom-0\' : noMargin}">\n\n    <div type="button" class="btn btn-primary" ng-class="addClass" ng-click="click()" ng-disabled="niceDisabled===true">\n        <div ng-class="{opacity0: loading==true, opacity1: loading==false}"><ng-transclude></ng-transclude></div>\n        <div ng-class="{opacity0: loading==false, opacity1: loading==true}" class="nice-button-loader-wrapper"><nice-loader add-class="nice-button-loader"></nice-loader></div>\n    </div>\n\n</div>\n'),$templateCache.put("views/nice-calendar.html",'<ng-form class="nice-calendar" name="forma" ng-class="{ \'margin-bottom-0\': noMargin }">\n    <div class="row">\n        <div class="col-xs-12" ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div class="col-xs-12" ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <div class="nice-calendar-wrapper">\n                <div class="header">\n                    <i class="fa fa-angle-left" ng-click="previous()"></i>\n                    <span>{{ month.format("MMMM, YYYY" )}}</span>\n                    <i class="fa fa-angle-right" ng-click="next()"></i>\n                </div>\n\n                <div class="week names">\n                    <span class="day" translate>Mon</span>\n                    <span class="day" translate>Tue</span>\n                    <span class="day" translate>Wed</span>\n                    <span class="day" translate>Thu</span>\n                    <span class="day" translate>Fri</span>\n                    <span class="day weekend" translate>Sat</span>\n                    <span class="day weekend" translate>Sun</span>\n                </div>\n\n                <div class="week" ng-repeat="week in weeks">\n                    <span\n                        class="day"\n                        ng-class="{\n                            today: day.isToday,\n                            \'different-month\': !day.isCurrentMonth,\n                            \'start-selected\': isSameDay(day.date, startDate),\n                            \'end-selected\': isSameDay(day.date, endDate),\n                            \'selected\': isBetweenRange(day.date),\n                            \'selecting-start\': selectStart,\n                            \'selecting-end\': !selectStart,\n                            \'weekend\': day.isWeekday,\n                            \'disabled\': day.isDisabled\n                        }"\n                        ng-style="\n                            (color && isBetweenRange(day.date)) && {\'background-color\': lighten(color) } ||\n                            (color && isSameDay(day.date, startDate)) && {\'background-color\': color } ||\n                            (color && isSameDay(day.date, endDate)) && {\'background-color\': color }\n                        "\n                        ng-click="select(day)"\n                        ng-repeat="day in week.days"\n                        >{{ day.number }}\n                    </span>\n                </div>\n                <div class="clearfix"></div>\n\n\n            <div class="nice-calendar-time" ng-if="time">\n                <div class="time-picker">\n                    <select\n                      class="time-picker-hour"\n                      ng-model="startDateHour"\n                      ng-change="startHourChange(startDateHour)"\n                      ng-options="hour for hour in hours">\n                    </select>\n                </div>\n\n                <div class="time-picker">\n                    <select\n                      class="time-picker-minute"\n                      ng-model="startDateMinute"\n                      ng-change="startMinuteChange(startDateMinute)"\n                      ng-options="minute for minute in minutes">\n                    </select>\n                </div>\n\n                <div class="time-picket-icon">\n                    <i class="fa fa-clock-o"></i>\n                </div>\n\n                <div class="time-picker">\n                     <select\n                      class="time-picker-hour"\n                      ng-model="endDateHour"\n                      ng-change="endHourChange(endDateHour)"\n                      ng-options="hour for hour in hours">\n                    </select>\n                </div>\n\n                <div class="time-picker">\n                    <select\n                      class="time-picker-minute"\n                      ng-model="endDateMinute"\n                      ng-change="endMinuteChange(endDateMinute)"\n                      ng-options="minute for minute in minutes">\n                    </select>\n                </div>\n            </div>\n\n            <div class="nice-selected-dates">\n                <div class="nice-start-date">\n                    <label translate>Start</label>\n                    <div>{{ formatDate(startDate) }}</div>\n                </div>\n                <div class="nice-end-date">\n                    <label translate>End</label>\n                    <div>{{ formatDate(endDate) }}</div>\n                </div>\n                <div class="clearfix"></div>\n            </div>\n        </div>\n\n            </div>\n    </div>\n</ng-form>'),$templateCache.put("views/nice-choice.html",'<div class="nice-choice" ng-class="{\'margin-bottom-0\' : noMargin}">\n    <div class="row">\n        <div class="col-xs-12" ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div class="col-xs-12" ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <ul class="list-unstyled" ng-class="{\'disabled\': isDisabled}">\n                <li ng-repeat="item in internalList" ng-class="{ \'selected\' : isItemSelected(item) }" ng-click="toggle(item)">\n                    <div class="choice-checkbox" ng-class="{\'circle\' : !multiple }"><i class="fa fa-check"></i></div>\n                    <div class="choice-label">{{ getLabel(item) }}</div>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n    <!--Needed for intercepting form changes ($dirty)!-->\n    <div ng-form="formChoice"></div>\n</div>'),$templateCache.put("views/nice-comment.html",'<div class="nice-comment">\n    <div class="row" ng-class="noMarginBottom ? \'\':\'margin-bottom-20\'">\n        <div ng-show="!editing" ng-class="labelWidth ? labelWidth : \'col-sm-6\'">\n            <span ng-if="model==\'\' && !editing"><a ng-click="edit()">{{noTextLabel}} <i class="fa fa-pencil"></i></a></span>\n            <span ng-if="model!=\'\' && !editing"><a ng-click="edit()">{{model}} <i class="fa fa-pencil"></i></a></span>\n        </div>\n        <div ng-show="editing" ng-class="fieldWidth ? fieldWidth : \'col-sm-6\'">\n            <div class="relative">\n                <textarea\n                    class="form-control"\n                    ng-model="model"\n                    title="{{ help }}"\n                    placeholder="{{placeholder}}"\n                    rows="{{rows}}"\n                    ng-blur="save()"\n                ></textarea>\n                <!--<nice-input  placeholder="{{placeholder}}" model="model" name="{{\'This text is placed at the end of the document.\'|translate}}" field-width="col-sm-12" text-area></nice-input>-->\n                <!--<div class="btn btn-sm btn-success btn-comment-save" ng-click="save()"><i class="fa fa-check"></i></div>-->\n                <!--<div class="btn btn-sm btn-danger btn-comment-cancel" ng-click="cancel()"><i class="fa fa-times"></i></div>-->\n            </div>\n        </div>\n    </div>\n</div>\n'),$templateCache.put("views/nice-date-range.html",'<ng-form class="nice-date-range" ng-class="{\'margin-bottom-0\' : noMargin}" name="form">\n  <div class="row">\n    <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n        <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n    </div>\n\n    <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n        <div class="input-group">\n            <input date-range-picker class="form-control date-picker" type="text" options="opts" ng-model="model" />\n            <span date-range-picker options="opts" ng-model="model" class="input-group-addon"><i class="fa fa-calendar"></i></span>\n        </div>\n    </div>\n  </div>\n</ng-form>\n'),$templateCache.put("views/nice-date.html",'<ng-form class="nice-date" name="form" ng-class="{ \'margin-bottom-0\': noMargin }">\n  <div class="row">\n    <div class="col-xs-12" ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n        <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n    </div>\n\n    <div class="col-xs-12" ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n        <div class="input-group">\n          <input\n              type="text"\n              class="form-control"\n              datepicker-popup="{{ format }}"\n              ng-model="model"\n              is-open="opened"\n              min-date="{{ min }}"\n              max-date="max"\n              datepicker-options="dateOptions"\n              ng-required="true"\n              close-text="Close"\n              ng-click="open($event)" />\n\n          <span class="input-group-btn">\n            <button type="button" class="btn btn-default" ng-click="open($event)"><i class="fa fa-calendar"></i></button>\n          </span>\n        </div>\n    </div>\n</ng-form>'),$templateCache.put("views/nice-datetime-picker.html",'<div class="nice-datetime-picker" name="form" ng-class="{ \'margin-bottom-0\': noMargin }">\n\n    <div class="nice-dtp-background" ng-click="closeDtp(true)" ng-if="opened"></div>\n\n    <div class="row">\n        <div class="col-xs-12" ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div class="col-xs-12" ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <!--Needed for intercepting form changes ($dirty)!-->\n            <div ng-form="formDatetimePicker"></div>\n\n            <div class="dropdown">\n                <a class="dropdown-toggle" id="dropdown{{randNum}}" role="button" ng-click="openDtp()" href="javascript:void(0);">\n                    <div class="input-group">\n                        <input type="text" class="form-control" value="{{value}}" ng-click="openDtp()">\n                        <span class="input-group-addon"><i class="fa" ng-class="{\'fa-clock-o\': date==\'false\', \'fa-calendar\': date!=\'false\'}"></i></span>\n                    </div>\n                </a>\n            </div>\n\n            <!-- inject nice-dtp here -->\n            <nice-dtp\n                    model="currentDate"\n                    format="{{format}}"\n                    model-format="{{modelFormat}}"\n                    date="{{date}}"\n                    time="{{time}}"\n                    width="{{width}}"\n                    enable-ok-buttons="{{enableOkButtons}}"\n                    lang="{{lang}}"\n                    min-date="{{minDate}}"\n                    max-date="{{maxDate}}"\n                    week-start="{{weekStart}}"\n                    ok-text="{{okText}}"\n                    cancel-text="{{cancelText}}"\n                    closed="closeDtp"\n            ></nice-dtp>\n        </div>\n    </div>\n</div>\n\n'),$templateCache.put("views/nice-datetimerange-picker.html",'<div class="nice-datetime-picker nice-datetimerange-picker" name="form" ng-class="{ \'margin-bottom-0\': noMargin }">\n\n    <div class="nice-dtp-background" ng-click="cancelClick()" ng-if="showDtpRange"></div>\n\n    <div class="row">\n        <div class="col-xs-12" ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div class="col-xs-12" ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <!--Needed for intercepting form changes ($dirty)!-->\n            <div ng-form="formDatetimeRangePicker"></div>\n\n            <div class="dropdown">\n                <a class="dropdown-toggle" id="dropdown{{randNum}}" role="button" ng-click="openDtpRange()" href="javascript:void(0);">\n                    <div class="input-group">\n                        <input type="text" class="form-control" value="{{value}}" ng-click="openDtpRange()">\n                        <span class="input-group-addon"><i class="fa" ng-class="{\'fa-clock-o\': date==\'false\', \'fa-calendar\': date!=\'false\'}"></i></span>\n                    </div>\n                </a>\n            </div>\n\n            <div class="dtp-range-wrapper" ng-show="showDtpRange">\n\n                <div class="dtp-layer">\n                    <div class="dtp-buttons-left">\n                        <a class="btn btn-primary btn-block" ng-click="selectLastNDays(1)">Last 24 hours</a>\n                        <a class="btn btn-primary btn-block" ng-click="selectLastNDays(7)">Last 7 days</a>\n                        <a class="btn btn-primary btn-block" ng-click="selectLastMonth()">Last month</a>\n                        <a class="btn btn-primary btn-block" ng-click="selectThisMonth()">This month</a>\n                    </div>\n\n\n                    <div class="dtp-left">\n                        <!-- inject nice-dtp here -->\n                        <nice-dtp\n                            model="dateStart"\n                            format="{{format}}"\n                            model-format="{{modelFormat}}"\n                            date="{{date}}"\n                            time="{{time}}"\n                            width="{{width}}"\n                            enable-ok-buttons="{{enableOkButtons}}"\n                            lang="{{lang}}"\n                            min-date="{{minDate}}"\n                            max-date="{{maxDate}}"\n                            week-start="{{weekStart}}"\n                            ok-text="{{okText}}"\n                            cancel-text="{{cancelText}}"\n                            inline="true"\n                        ></nice-dtp>\n                    </div>\n                    <div class="dtp-right">\n                        <!-- inject nice-dtp here -->\n                        <nice-dtp\n                                model="dateEnd"\n                                format="{{format}}"\n                                model-format="{{modelFormat}}"\n                                date="{{date}}"\n                                time="{{time}}"\n                                width="{{width}}"\n                                enable-ok-buttons="{{enableOkButtons}}"\n                                lang="{{lang}}"\n                                min-date="{{minDate}}"\n                                max-date="{{maxDate}}"\n                                week-start="{{weekStart}}"\n                                ok-text="{{okText}}"\n                                cancel-text="{{cancelText}}"\n                                inline="true"\n                         > </nice-dtp>\n                    </div>\n\n                    <div class="dtp-buttons-bottom">\n                        <a class="btn btn-danger btn-block margin-right-20" ng-click="cancelClick()">Cancel</a>\n                        <a class="btn btn-success btn-block" ng-click="okClick()">Ok</a>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>'),$templateCache.put("views/nice-dropdown.html",'<div class="nice-dropdown" ng-class="{ \'margin-bottom-0\': noMargin }">\n    <div class="row">\n        <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <div ng-class="addButtonEnable && !isDisabled ? \'input-group\': \'\'">\n                <div class="btn-group" dropdown is-open="status.isopen" ng-class="{ \'disabled\': isDisabled || emptyList }">\n                    <button\n                        type="button"\n                        class="btn btn-block btn-dropdown dropdown-toggle"\n                        title="{{ getLabel(internalSelected) }}"\n                        dropdown-toggle\n                        ng-disabled="isDisabled || emptyList">\n\n                        <span ng-if="internalSelected.color_hex_code" class="dropdown-color" ng-style="{\'background\': internalSelected.color_hex_code}"></span>\n                        <span ng-if="!multiple">{{ getLabel(internalSelected) }}</span>\n\n                        <span ng-if="multiple">\n                            <!--<span ng-repeat="item in internalSelected"><span ng-if="$index > 0">, </span>{{ getLabel(item) }}</span>-->\n                            <span ng-if="internalSelected.length  > 1">{{ internalSelected.length }} <translate>selected</translate></span>\n                            <span ng-if="internalSelected.length  == 1">{{ getLabel(internalSelected[0]) }}</span>\n                            <span ng-if="internalSelected.length == 0" translate>None</span>\n                        </span>\n\n                        <!--<span ng-if="showTax && internalSelected.value">{{ internalSelected.value * 100 }}%</span>-->\n                        <span class="caret"></span>\n                    </button>\n\n                    <ul id="{{id}}" class="dropdown-menu" role="menu">\n                        <li id="{{id}}-{{$index}}" ng-repeat="item in internalList" ng-click="clicked(item)">\n                            <a href>\n                                <span class="choice-checkbox" ng-if="multiple" ng-class="{ \'selected\' : isItemSelected(item) }"><i class="fa fa-check"></i></span>\n                                <span ng-if="item.color_hex_code" class="dropdown-color" ng-style="{\'background\': item.color_hex_code}"></span>\n                                <span ng-class="{\'multiple-item\': multiple}">{{ getLabel(item) }}</span>\n                                <!--<span ng-if="showTax && item.value">{{ item.value * 100 }}%</span>-->\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n\n                <span class="input-group-btn" ng-if="addButtonEnable && !isDisabled">\n                    <button class="btn btn-primary" ng-click="addButtonFunction()" type="button">+</button>\n                </span>\n            </div>\n        </div>\n    </div>\n    <!--Needed for intercepting form changes ($dirty)!-->\n    <div ng-form="formDropdown"></div>\n</div>\n\n'),$templateCache.put("views/nice-dtp.html",'<div class="dtp-wrapper">\n    <div class="dtp" id="this.name" ng-class="{\'hidden\': !showDtp}">\n        <div class="dtp-content" ng-style="dtp_content_style">\n            <div class="dtp-date-view">\n                <div class="dtp-header" ng-if="!inline">\n                    <div class="dtp-actual-day">{{actualDay}}</div>\n                    <div class="dtp-close" ng-if="!inline"><a href="javascript:void(0);" ng-click="onCloseClick()"><i class="fa fa-close"></i></div>\n                </div>\n                <div class="dtp-date" ng-if="!inline" ng-class="{\'hidden\': !showDateHeader}">\n                    <div>\n                        <div class="left center p10">\n                            <a href="javascript:void(0);" class="dtp-select-month-before" ng-click="onMonthBeforeClick()" ng-class="{\'disabled\': !btnMonthBeforeEnabled}"><i class="fa fa-chevron-left"></i></a>\n                        </div>\n                        <div class="dtp-actual-month p80" ng-click="initDate()">{{actualMonth}}</div>\n                        <div class="right center p10">\n                            <a href="javascript:void(0);" class="dtp-select-month-after" ng-click="onMonthAfterClick()" ng-class="{\'disabled\': !btnMonthAfterEnabled}"><i class="fa fa-chevron-right"></i></a>\n                        </div>\n                        <div class="clearfix"></div>\n                    </div>\n                    <div class="dtp-actual-num" ng-click="initDate()">{{actualNum}}</div>\n                    <div>\n                        <div class="left center p10">\n                            <a href="javascript:void(0);" class="dtp-select-year-before" ng-click="onYearBeforeClick()" ng-class="{\'disabled\': !btnYearBeforeEnabled}""><i class="fa fa-chevron-left"></i></a>\n                        </div>\n                        <div class="dtp-actual-year p80" ng-click="initDate()">{{actualYear}}</div>\n                        <div class="right center p10">\n                            <a href="javascript:void(0);" class="dtp-select-year-after" ng-click="onYearAfterClick()" ng-class="{\'disabled\': !btnYearAfterEnabled}"><i class="fa fa-chevron-right"></i></a>\n                        </div>\n                        <div class="clearfix"></div>\n                    </div>\n                </div>\n                <div class="dtp-time" ng-show="!showTimeHeader">\n                    <div class="dtp-actual-maxtime">\n                        <a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==1}" ng-click="initHours()" href="javascript:void(0);">{{actualTime.hours}}</a>:<a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==2}" ng-click="initMinutes()" href="javascript:void(0);">{{actualTime.minutes}}</a>\n                    </div>\n                </div>\n                <div class="dtp-picker">\n                    <div class="dtp-picker-calendar" ng-class="{\'hidden\': !showCalendar}">\n                        <div>\n                            <div ng-if="inline" class="left center p10">\n                                <a href="javascript:void(0);" class="dtp-select-month-before" ng-click="onMonthBeforeClick()" ng-class="{\'disabled\': !btnMonthBeforeEnabled}"><i class="fa fa-chevron-left"></i></a>\n                            </div>\n                            <div class="dtp-picker-month" ng-class="{\'p80\': inline}">{{monthAndYear}}</div>\n                            <div class="right center p10" ng-if="inline">\n                                <a href="javascript:void(0);" class="dtp-select-month-after" ng-click="onMonthAfterClick()" ng-class="{\'disabled\': !btnMonthAfterEnabled}"><i class="fa fa-chevron-right"></i></a>\n                            </div>\n                        </div>\n\n                        <table class="table dtp-picker-days">\n                            <thead>\n                            <th ng-repeat="weekDay in weekDays track by $index">{{weekDay}}</th>\n                            </thead>\n                            <tbody>\n                            <tr ng-repeat="week in weeks">\n                                <td ng-repeat="day in week">\n                                    <span ng-if="day.disabled" class="dtp-select-day">{{day.label}}</span>\n                                    <a ng-if="!day.disabled" ng-click="onSelectDate(day)" href="javascript:void(0);" class="dtp-select-day" ng-class="{\'selected\': day.selected}">{{day.label}}</a>\n                                </td>\n                            </tr>\n                            </tbody>\n                        </table>\n\n                    </div>\n                    <div class="dtp-picker-datetime" ng-class="{\'hidden\': !showTime}">\n                        <div class="dtp-actual-meridien">\n                            <div class="dtp-actual-time p60" ng-show="showTimeHeader">\n                                <a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==1}" ng-click="initHours()" href="javascript:void(0);">{{actualTime.hours}}</a>:<a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==2}" ng-click="initMinutes()" href="javascript:void(0);">{{actualTime.minutes}}</a>\n                            </div>\n                            <div class="clearfix"></div>\n                        </div>\n                        <div class="dtp-picker-clock">\n                            <div class="dtp-hand dtp-hour-hand" ng-show="currentView==1"></div>\n                            <div class="dtp-hand dtp-minute-hand" ng-show="currentView==2"></div>\n                            <div class="dtp-clock-center"></div>\n                            <div ng-repeat="hour in hours" class="dtp-picker-time" ng-style="hour.style">\n                                <a href="javascript:void(0);" class="dtp-select-hour" ng-class="{\'selected\': hour.selected, \'disabled\': hour.disabled}" ng-click="onSelectHour(hour)">{{hour.h}}</a>\n                            </div>\n                            <div ng-repeat="minute in minutes" class="dtp-picker-time" ng-style="minute.style">\n                                <a href="javascript:void(0);" class="dtp-select-minute" ng-class="{\'selected\': minute.selected, \'disabled\': minute.disabled}" ng-click="onSelectMinute(minute)">{{minute.m}}</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!--<div class="dtp-buttons" ng-if="enableOkButtons">-->\n                <!--<button class="dtp-btn-cancel btn btn-flat" ng-click="onCancelClick()">{{cancelText}}</button>-->\n                <!--<button class="dtp-btn-ok btn btn-flat" ng-click="onOKClick()"> {{okText}} </button>-->\n                <!--<div class="clearfix"></div>-->\n            <!--</div>-->\n        </div>\n    </div>\n</div>\n'),$templateCache.put("views/nice-input.html",'<ng-form class="nice-input" ng-class="{\'margin-bottom-0\' : noMargin}" name="form">\n  <div class="row">\n    <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n        <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n    </div>\n\n    <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n        <div class="form-group"\n             ng-class="{\n                \'has-feedback\': showValid && !hideValid,\n                \'has-warning\': !isDisabled && form.$invalid && form.$dirty && !hideValid,\n                \'has-success\': !isDisabled && form.$valid && form.$dirty && showValid,\n                \'symbol\': symbol,\n                \'disabled\': isDisabled\n        }">\n            <input ng-show="!textArea"\n                class="form-control"\n                type="{{ internalType }}"\n                ng-model="model"\n                title="{{ help }}"\n                name="{{ name }}"\n                id="{{ id }}"\n                placeholder="{{ placeholder }}"\n                ng-minlength="minlength"\n                ng-maxlength="maxlength"\n                ng-required="required"\n                ng-keypress="keypress($event)"\n                ng-pattern="regexexp"\n                ng-disabled="isDisabled"\n            >\n            <textarea ng-show="textArea"\n                class="form-control"\n                ng-model="model"\n                title="{{ help }}"\n                id="{{ id }}"\n                placeholder="{{ placeholder }}"\n                rows="{{textAreaLines}}"\n                ng-minlength="minlength"\n                ng-maxlength="maxlength"\n                ng-required="required"\n                ng-pattern="regexexp"\n                ng-disabled="isDisabled"\n            ></textarea>\n\n            <span class="input-group-addon" ng-if="symbol">{{ symbol }}</span>\n            <!--<span ng-if="!disabled && showValid && form.$valid && form.$dirty" class="glyphicon glyphicon-ok form-control-feedback feedback-valid" aria-hidden="true"></span>-->\n            <!--<span ng-if="!disabled && !hideValid && form.$invalid && form.$dirty" class="glyphicon glyphicon-remove form-control-feedback feedback-invalid" aria-hidden="true"></span>-->\n        </div>\n\n        <div ng-messages="form.$error" ng-if="form.$dirty">\n            <div class="error-message" ng-message="email" ng-if="form.$dirty" translate>Email is not valid.</div>\n            <div class="error-message" ng-message="pattern" ng-if="form.$dirty" translate>This field requires a specific pattern.</div>\n            <div class="error-message" ng-message="minlength"><translate>Your input is too short. It must contain at least</translate> {{ minlength }} <translate>characters</translate>.</div>\n            <div class="error-message" ng-message="maxlength" translate>Your input is too long</div>\n            <div class="error-message" ng-message="required" ng-if="form.$dirty" translate>This field is required.</div>\n            <div class="error-message" ng-message="unique" translate>This field must be unique.</div>\n        </div>\n    </div>\n  </div>\n</ng-form>\n'),$templateCache.put("views/nice-label.html",'<div class="nice-label">\n\n<div class="row">\n    <div ng-class="labelWidth ? labelWidth : \'col-xs-4\'" ng-if="title">\n        <label class="nice">{{ title }}</label>\n    </div>\n\n    <div ng-class="fieldWidth ? fieldWidth : \'col-xs-8\'">\n        <p class="value">{{ value }}</p>\n    </div>\n</div>\n\n</div>\n'),$templateCache.put("views/nice-loader.html",'<div class="nice-loader" ng-if="!visibleWhen" ng-class="addClass">\n  <svg version="1.1" id="loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n    <path fill="#000" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"></path>\n  </svg>\n</div>'),$templateCache.put("views/nice-notification.html",'<div class="notification">\n    <h3 ng-show="title" ng-bind-html="title"></h3>\n    <div class="message" ng-bind-html="message"></div>\n</div>'),$templateCache.put("views/nice-number.html",'<div ng-form="form" class="nice-number" ng-class="{\'margin-bottom-0\' : noMargin}">\n    <div ng-class="{\'row\' : !disableRow}">\n        <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}</label>\n        </div>\n\n        <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <div class="input-group"\n                ng-class="{\'has-warning\': !disabled && form.$invalid && form.$dirty}">\n                <span class="input-group-btn">\n                    <button class="btn btn-default" type="button" ng-disabled="!canSubstract" ng-click="subtract()">-</button>\n                </span>\n\n                <input type="number" class="form-control" max="{{ max }}" min="{{ min }}" ng-model="model">\n\n                <span class="input-group-btn">\n                    <button class="btn btn-default" type="button" ng-disabled="!canAdd" ng-click="add()">+</button>\n                </span>\n            </div>\n            <div ng-messages="form.$error" ng-if="showError">\n                <div class="error-message" ng-message="number" ng-if="form.$dirty" translate>This field requires a number</div>\n                <div class="error-message" ng-message="min"><translate>Min value is</translate> {{ min }}</div>\n                <div class="error-message" ng-message="max"><translate>Max value is</translate> {{ max }}</div>\n            </div>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/nice-percent.html",'<ng-form class="nice-input" ng-class="{\'margin-bottom-0\' : noMargin}" name="form">\n  <div class="row">\n    <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n        <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n    </div>\n\n    <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n        <div class="form-group has-feedback symbol"\n             ng-class="{\n                \'has-warning\': !isDisabled && form.$invalid && form.$dirty && !hideValid,\n                \'has-success\': !isDisabled && form.$valid && form.$dirty && showValid,\n                \'disabled\': isDisabled\n        }">\n            <input\n                class="form-control"\n                type="text"\n                max="100"\n                min="0"\n                ng-model="internalModel"\n                placeholder="{{ placeholder }}"\n                ng-required="required"\n                ng-keypress="keypress($event)"\n                ng-change="change()"\n                ng-disabled="isDisabled">\n\n            <span class="input-group-addon">%</span>\n            <!--<span ng-if="!disabled && showValid && form.$valid && form.$dirty" class="glyphicon glyphicon-ok form-control-feedback feedback-valid" aria-hidden="true"></span>-->\n            <!--<span ng-if="!disabled && !hideValid && form.$invalid && form.$dirty" class="glyphicon glyphicon-remove form-control-feedback feedback-invalid" aria-hidden="true"></span>-->\n        </div>\n\n        <div ng-messages="form.$error">\n            <div class="error-message" ng-message="email" ng-if="form.$dirty">Email is not valid.</div>\n            <div class="error-message" ng-message="pattern" ng-if="form.$dirty">This field requires a specific pattern.</div>\n            <div class="error-message" ng-message="required" ng-if="form.$dirty">This field is required.</div>\n            <div class="error-message" ng-message="minlength">Your field is too short. It must contain at least {{ minlength }} characters.</div>\n            <div class="error-message" ng-message="maxlength">Your field is too long</div>\n        </div>\n    </div>\n  </div>\n</ng-form>'),
$templateCache.put("views/nice-search.html",'<ng-form class="nice-input nice-search" ng-class="{\'margin-bottom-0\' : noMargin}" name="form">\n    <div class="row">\n        <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <div class="input-group" ng-class="{\n                \'disabled\': isDisabled,\n                \'has-warning\': !isDisabled && form.$invalid && form.$dirty,\n                \'has-success\': !isDisabled && form.$valid && form.$dirty}">\n                <input\n                    class="form-control"\n                    type="text"\n                    id="{{ id }}"\n                    ng-model="modelString"\n                    ng-keypress="keypress($event)"\n                    placeholder="{{ placeholder }}"\n                    ng-disabled="isDisabled"\n                    ng-change="updateSearch()"\n                    ng-required="required"\n                >\n\n                <span class="input-group-addon clickable" ng-click="search()">\n                    <i ng-show="!loading" class="fa fa-search" ></i>\n                    <i ng-show="loading" class="fa fa-refresh fa-spin"></i>\n                </span>\n            </div>\n        </div>\n    </div>\n\n    <div class="row">\n        <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title"></div>\n        <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <div class="nice-dropdown-empty" ng-if="noResults">\n                <div class="nice-search-row">No results found.</div>\n            </div>\n\n            <div class="nice-dropdown" ng-if="results.length">\n                <div ng-repeat="result in results" class="nice-search-row" ng-class="{\'active\': selectedIndex == $index}" ng-click="selectRow(result)">\n                    <span class="text-bold">{{ result[keyForInputLabel] }}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n  <!--Here is injected dropdown html if passed and results present and open.-->\n  <!--<div ng-transclude></div>-->\n</ng-form>'),$templateCache.put("views/nice-time-picker.html",'<div class="nice-datetime-picker" name="form" ng-class="{ \'margin-bottom-0\': noMargin }">\n    <div class="row">\n        <div class="col-xs-12" ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n            <label class="nice">{{ title }}<span ng-if="required">*</span></label>\n        </div>\n\n        <div class="col-xs-12" ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n            <!--Needed for intercepting form changes ($dirty)!-->\n            <div ng-form="formDatetimePicker"></div>\n\n            <div class="dropdown">\n                <a class="dropdown-toggle" id="dropdown{{randNum}}" role="button" ng-click="onClick()" href="javascript:void(0);">\n                    <div class="input-group">\n                        <input type="text" class="form-control" value="{{value}}" ng-click="onClick()">\n                        <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>\n                    </div>\n                </a>\n            </div>\n\n            <div class="dtp-wrapper">\n                <div class="dtp" id="this.name" ng-class="{\'hidden\': !showDtp}">\n                    <div class="dtp-content" ng-style="dtp_content_style">\n                        <div class="dtp-date-view">\n                            <div class="dtp-header" ng-if="!inline">\n                                <div class="dtp-actual-day">{{actualDay}}</div>\n                                <div class="dtp-close" ng-if="!inline"><a href="javascript:void(0);" ng-click="onCloseClick()"><i class="fa fa-close"></i></div>\n                            </div>\n                            <div class="dtp-time" ng-show="!showTimeHeader">\n                                <div class="dtp-actual-maxtime">\n                                    <a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==1}" ng-click="initHours()" href="javascript:void(0);">{{actualTime.hours}}</a>:<a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==2}" ng-click="initMinutes()" href="javascript:void(0);">{{actualTime.minutes}}</a>\n                                </div>\n                            </div>\n                            <div class="dtp-picker">\n\n                                <div class="dtp-picker-datetime" ng-class="{\'hidden\': !showTime}">\n                                    <div class="dtp-actual-meridien">\n                                        <div class="dtp-actual-time p60" ng-show="showTimeHeader">\n                                            <a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==1}" ng-click="initHours()" href="javascript:void(0);">{{actualTime.hours}}</a>:<a class="dtp-hours-minutes-btn" ng-class="{\'selected\': currentView==2}" ng-click="initMinutes()" href="javascript:void(0);">{{actualTime.minutes}}</a>\n                                        </div>\n                                        <div class="clearfix"></div>\n                                    </div>\n                                    <div class="dtp-picker-clock">\n                                        <div class="dtp-hand dtp-hour-hand" ng-show="currentView==1"></div>\n                                        <div class="dtp-hand dtp-minute-hand" ng-show="currentView==2"></div>\n                                        <div class="dtp-clock-center"></div>\n                                        <div ng-repeat="hour in hours" class="dtp-picker-time" ng-style="hour.style">\n                                            <a href="javascript:void(0);" class="dtp-select-hour" ng-class="{\'selected\': hour.selected, \'disabled\': hour.disabled}" ng-click="onSelectHour(hour)">{{hour.h}}</a>\n                                        </div>\n                                        <div ng-repeat="minute in minutes" class="dtp-picker-time" ng-style="minute.style">\n                                            <a href="javascript:void(0);" class="dtp-select-minute" ng-class="{\'selected\': minute.selected, \'disabled\': minute.disabled}" ng-click="onSelectMinute(minute)">{{minute.m}}</a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/nice-yesno.html",'<div class="row nice-yesno" ng-class="{\'margin-bottom-0\' : noMargin}">\n    <div ng-class="labelWidth ? labelWidth : \'col-sm-4\'" ng-if="title">\n        <label class="nice">{{ title }}</label>\n    </div>\n    <div ng-class="fieldWidth ? fieldWidth : \'col-sm-8\'">\n        <div class="yesno-wrapper noselect" ng-class="{ \'disabled\': isDisabled }">\n            <div class="yesno-yes-bg" ng-click="switch()">{{ yes }}</div>\n            <div class="yesno-no-bg" ng-click="switch()">{{ no }}</div>\n            <div class="yesno-button" ng-click="switch()">{{ state }}</div>\n        </div>\n    </div>\n    <!--Needed for intercepting form changes ($dirty)!-->\n    <div ng-form="formYesno"></div>\n</div>')}]);